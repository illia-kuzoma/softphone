(function(e){function t(t){for(var s,i,o=t[0],r=t[1],c=t[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);u&&u(t);while(h.length)h.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],s=!0,o=1;o<a.length;o++){var r=a[o];0!==n[r]&&(s=!1)}s&&(l.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},l=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"28df":function(e,t,a){"use strict";var s=a("deb4"),n=a.n(s);n.a},3201:function(e,t,a){"use strict";var s=a("b2f4"),n=a.n(s);n.a},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=l(e);return a(t)}function l(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=l,e.exports=n,n.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app"}},[a("router-view")],1)},l=[],i={name:"App",components:{},data:function(){return{}}},o=i,r=(a("7c55"),a("2877")),c=a("6544"),u=a.n(c),d=a("7496"),h=Object(r["a"])(o,n,l,!1,null,null,null),p=h.exports;u()(h,{VApp:d["a"]});var g=a("58ca"),m=a("8c4f"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{id:"login",fluid:"","fill-height":""}},[s("v-content",[s("v-container",{attrs:{fluid:"","fill-height":""}},[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{staticClass:"login-form"},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{staticClass:"login-header",attrs:{flat:""}},[s("v-img",{staticClass:"shrink login-logo",attrs:{alt:"Logo",contain:"",transition:"scale-transition",width:"163",src:a("b463")}})],1),s("v-card-text",[s("v-form",{staticClass:"form"},[s("p",{staticClass:"placeholder"},[e._v("EMAIL")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],class:{inputWarning:e.isValid},attrs:{type:"text",id:"email",required:"",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("p",{staticClass:"placeholder"},[e._v("PASSWORD")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:{inputWarning:e.isValid},attrs:{id:"password",type:"password",required:"",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])],1),s("v-card-actions",[s("v-btn",{staticClass:"login-button",on:{click:e.validate}},[e._v("Log In ")])],1)],1)],1)],1)],1)],1)],1)},_=[],v=a("bc3a"),b=a.n(v),D={name:"HttpService",props:{},data:function(){return{}},methods:{post:function(e,t){var a=localStorage.serve_host+e;return b.a.post(a,t)},get:function(e){var t=localStorage.serve_host+e;return b.a.get(t)},delete:function(e,t){var a=localStorage.serve_host+e;return b.a.delete(a,t)}}},y={name:"Login",data:function(){return{email:"",password:"",isValid:!1}},methods:{validate:function(){""!==this.email&&""!==this.password||(this.isValid=!0),""!==this.email&&""!==this.password&&this.login()},login:function(){var e=this;this.$loading(!0),""!==localStorage.serve_host&&(localStorage.serve_host=""),"localhost"===window.location.hostname||"callcentrcl.wellnessliving.com"===window.location.hostname?localStorage.serve_host="http://callcentr.wellnessliving.com":localStorage.serve_host="http://softphone",D.methods.post("/auth",{email:this.email,password:this.password}).then((function(t){e.$loading(!1),t.data.user&&(e.$store.state.user=t.data.user,localStorage.token=t.data.token,je.push("/dashboard/missed-calls")),!0===t.data.error&&(localStorage.token="-",e.isValid=!0,alert(t.data.message))})).catch((function(t){localStorage.token="-",console.log(t),alert("Something went wrong"),e.$loading(!1)}))},forgotFunc:function(){console.log("forgot password")}},created:function(){console.log("think about redirect to dashboard If token not empty")}},C=y,k=(a("9184"),a("8336")),S=a("b0af"),w=a("99d9"),T=a("a523"),j=a("a75b"),Y=a("0e8f"),x=a("4bd4"),P=a("adda"),M=a("a722"),A=a("71d9"),O=Object(r["a"])(C,f,_,!1,null,"76425560",null),F=O.exports;u()(O,{VBtn:k["a"],VCard:S["a"],VCardActions:w["a"],VCardText:w["b"],VContainer:T["a"],VContent:j["a"],VFlex:Y["a"],VForm:x["a"],VImg:P["a"],VLayout:M["a"],VToolbar:A["a"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dashboard"}},[a("HeaderComponent",{attrs:{userObject:e.userData}}),a("div",{staticClass:"dashboard"},[a("div",[a("v-tabs",{staticClass:"tabs",attrs:{centered:"",grow:"",height:"60px"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t.id,attrs:{to:t.path,exact:""}},[e._v(" "+e._s(t.name)+" ")])})),1),a("router-view")],1)])],1)},I=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("div",{staticClass:"row"},[s("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Logo",contain:"",transition:"scale-transition",width:"257",src:a("6d80")}}),s("div",{staticClass:"side"},[e.userData?s("img",{staticClass:"round",attrs:{alt:"user",src:e.userData.photo_url}}):e._e(),e.userData?s("div",{staticClass:"menu"},[s("div",{staticClass:"username",on:{click:e.showModal}},[s("p",{staticClass:"name"},[e._v(e._s(e.userData.first_name)+" "+e._s(e.userData.last_name))]),s("p",{staticClass:"role"},[e._v(e._s(e.userData.role))]),s("p",{staticClass:"role"},[e._v("Log Out")])]),e._m(0)]):e._e()])],1)])},V=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"submenu"},[a("p",[e._v("Login")])])}],$={name:"HeaderComponent",props:["userObject"],data:function(){return{isShowDropdown:!1,userData:null}},metaInfo:{title:"Vue App",meta:[{vmid:"description",property:"description",content:"Communication Center"},{vmid:"og:title",property:"og:title",content:"Communication Center"},{vmid:"og:description",property:"og:description",content:"Communication Center"}]},methods:{showModal:function(){this.isShowDropdown=!0},getUserData:function(){var e=this.$store.state.user;this.userData=e,console.log(this.$store.state),console.log(this.$store.state.user)},setUserData:function(e){console.log("HeaderComponent setUserData newValue"),this.userData=e}},watch:{userObject:function(e){this.setUserData(e)}},created:function(){this.getUserData()}},L=$,U=(a("feea"),Object(r["a"])(L,N,V,!1,null,"6689dbec",null)),R=U.exports;u()(U,{VImg:P["a"]});a("411c");var z,H,q=a("c1df"),E=a.n(q),G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Missed-Calls"}},[a("div",{staticClass:"missed-calls"},[a("div",{staticClass:"controls-container"},[a("div",{staticClass:"date-container"},[a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("today"),e.setActive(t)}}},[e._v("Today ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setBeforeDate(),e.setArrowActive(t)}}},[e._v("◂ ")]),a("date-picker",{staticClass:"date-item",attrs:{type:"date",valueType:"YYYY-MM-DD",format:"DD/MM/YYYY"},on:{change:function(t){return e.dateSelected()}},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setNextDate(),e.setArrowActive(t)}}},[e._v("▸ ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("day"),e.setActive(t)}}},[e._v("Day ")]),a("button",{staticClass:"button button-li date-item color-grey color-dark",on:{click:function(t){e.setDate("week"),e.setActive(t)}}},[e._v("Week ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("month"),e.setActive(t)}}},[e._v("Month ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("year"),e.setActive(t)}}},[e._v("Year ")])],1),a("div",{staticClass:"search-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text",id:"search",placeholder:"Search...",name:"search"},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),a("button",{staticClass:"button color-violet",attrs:{id:"search-button"},on:{click:function(t){e.search(e.searchText)}}},[e._v("Search ")])]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){return e.updateData()}}},[e._v(" Update Data ")])]),a("div",{staticClass:"controls-container",staticStyle:{"justify-content":"space-between"}},[a("div",{staticClass:"multiselect-items",staticStyle:{display:"flex"}},[a("div",[a("label",{staticClass:"typo__label"},[e._v("Select Department(s)")]),a("multiselect",{attrs:{options:e.department_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setUsers},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.department_multiple_selected_value,callback:function(t){e.department_multiple_selected_value=t},expression:"department_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[e._v("Select Team(s)")]),a("multiselect",{attrs:{options:e.team_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setUsers},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.team_multiple_selected_value,callback:function(t){e.team_multiple_selected_value=t},expression:"team_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[e._v("Select agent(s)")]),a("multiselect",{attrs:{options:e.agent_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setUsers},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.agent_multiple_selected_value,callback:function(t){e.agent_multiple_selected_value=t},expression:"agent_multiple_selected_value"}})],1),a("div",{staticClass:"filter-selector"},[a("label",{staticClass:"typo__label"},[e._v("Select filter")]),a("multiselect",{attrs:{options:e.filtersList,multiple:!1,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setFilter},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}}),null!=e.selectedFilter?a("p",{on:{click:function(t){return e.deleteFilter(e.selectedFilter)}}},[e._v(" ✖ ")]):e._e()],1)]),a("div",[a("div",{staticClass:"filters multiselect-items"},[a("label",{staticClass:"typo__label"},[e._v("Add filter")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFilterName,expression:"newFilterName"}],staticClass:"mx-input multiselect__tags",staticStyle:{padding:"0 5px"},attrs:{type:"text",placeholder:"New filter name"},domProps:{value:e.newFilterName},on:{input:function(t){t.target.composing||(e.newFilterName=t.target.value)}}}),a("div",{staticClass:"filters-options"},[""!=e.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.newFilterName=""}}},[e._v("Cancel")]):e._e(),""!=e.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){return e.addNewFilter(e.newFilterName)}}},[e._v("Add")]):e._e()])])])]),0!==Object.keys(e.chartData).length?a("div",{staticClass:"chart-container"},[a("h2",[e._v("MISSED CALLS")]),e.chartData?a("line-chart",{staticClass:"chart",attrs:{id:"chartId",chartObject:e.chartData,"is-resizable":!0,"use-css-transforms":!0},on:{clicked:e.getAgentFromChart,close:e.ffFff}}):e._e()],1):e._e(),0===Object.keys(e.chartData).length?a("div",{staticClass:"table-container"},[a("h1",[e._v("No Chart Data For This Period")])]):e._e(),e.tableCallsData.length>0?a("div",{staticClass:"table-container"},[a("v-data-table",{staticClass:"v-data-table elevation-1",attrs:{headers:e.tableCallsHeaders,items:e.tableCallsData,"items-per-page":20,page:e.tablePage,options:e.options,"hide-default-footer":!0,"fixed-header":""},on:{"update:page":[function(t){e.tablePage=t},e.updatePage],"update:options":function(t){e.options=t},"update:sort-desc":e.updateSortDesc},scopedSlots:e._u([{key:"item.user_data",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.user_data.photo_url,alt:""}}),a("p",[e._v(e._s(s.user_data.full_name))])])]}},{key:"item.user_data.department",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("p",[e._v(e._s(s.user_data.department.name))])])]}},{key:"item.user_data.team",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("p",[e._v(e._s(s.user_data.team.name))])])]}},{key:"item.business",fn:function(t){var s=t.item;return[a("div",{staticClass:"business"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.business.business_link},on:{click:function(t){return e.goOutTo(s.business.business_link)}}},[e._v(e._s(s.business.business_name)+" ")])])]}},{key:"item.contact",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.contact.contact_link},on:{click:function(t){return e.goOutTo(s.contact.contact_link)}}},[e._v(e._s(s.contact.contact_name)+" ")])])]}},{key:"item.time_create",fn:function(t){var s=t.item;return[a("div",{staticClass:"table-date-cell"},[e._v(e._s(e.getDate(s["time_create"])))])]}}],null,!1,2219458636)}),e.tablePageCount>1?a("v-pagination",{staticClass:"table-pagination",attrs:{length:e.tablePageCount,"next-icon":e.nextIcon,"prev-icon":e.prevIcon},on:{input:e.changePage},model:{value:e.tablePage,callback:function(t){e.tablePage=t},expression:"tablePage"}}):e._e()],1):e._e(),0==e.tableCallsData.length?a("div",{staticClass:"table-container"},[a("h1",[e._v("No Table Data For This Period")])]):e._e()])])},W=[],X=(a("d81d"),a("ec45")),J=a("1fca"),Z={extends:J["a"],props:["chartObject"],data:function(){return{gradient:null,clickedGradient:null,type:"horizontalBar",chartdata:{labels:[],datasets:[{label:"MISSED CALLS",data:[],backgroundColor:[]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},animation:{duration:0},scales:{yAxes:[{display:!0,gridLines:{display:!1},ticks:{beginAtZero:!0,min:0,precision:0}}],xAxes:[{gridLines:{display:!1}}]}}}},methods:{setGistData:function(e){var t=this,a=e,s=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450);s.addColorStop(0,"#727cf5"),s.addColorStop(1,"#9075da");var n=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450);for(var l in n.addColorStop(0,"#6421A7"),n.addColorStop(1,"#6421A7"),this.backgroundColor=[],this.chartdata.labels=[],this.chartdata.datasets[0].data=[],a)this.chartdata.labels.push(l),this.chartdata.datasets[0].data.push(a[l]),this.chartdata.datasets[0]["backgroundColor"].push(s);this.options["onClick"]=function(e,a){if(a[0]){var l=a[0]["_index"],i=a[0]["_chart"].data.labels[l],o=a[0]["_chart"].data.datasets[0].data[l],r={index:l,name:i,value:o};t.cellClickEvent(r);var c=t.chartdata.datasets[0]["backgroundColor"];if(c[l]===n)c[l]=s;else{for(var u=0;u<c.length;u++)c[u]=s;c[l]=n}}t.renderChart(t.chartdata,t.options)},this.renderChart(this.chartdata,this.options)},cellClickEvent:function(e){this.$emit("clicked",e)}},watch:{chartObject:function(e){this.renderChart({},{}),this.setGistData(e)}},mounted:function(){this.setGistData(this.chartObject)}},K=Z,Q=Object(r["a"])(K,z,H,!1,null,null,null),ee=Q.exports,te=a("8e5f"),ae=a.n(te),se={name:"MissedCalls",components:{DatePicker:X["a"],LineChart:ee,Multiselect:ae.a},data:function(){return{selectedDate:null,dateType:"date",chartData:[],userData:[],tableCallsData:[],serverChartData:null,options:{},tableCallsHeaders:[{text:"Agent",value:"user_data"},{text:"Department",value:"user_data.department"},{text:"Team",value:"user_data.team"},{text:"Business Name",value:"business"},{text:"Contact",value:"contact",width:200},{text:"Phone",value:"phone",sortable:!1,width:150},{text:"Created Time",value:"time_create",sortable:!1,width:120}],tablePage:null,tableSort:null,tablePageCount:null,tableItemsPerPage:null,searchText:null,selectedAgent:null,selectedAgentUid:null,agent_multiple_options:[],agent_multiple_selected_value:null,department_multiple_options:[],department_multiple_selected_value:null,team_multiple_options:[],team_multiple_selected_value:null,nextIcon:">",prevIcon:"<",s_agent_id:"",s_department_id:"",s_team_id:"",period:"week",newFilterName:"",filtersList:[],selectedFilter:null}},methods:{getPeriod:function(){return this.period},getDate:function(e){var t=new Date(1e3*e),a=E()(t).format("ll"),s=E()(t).format("hh:mm:ss a");return s+" "+a},setUsers:function(){this.selectedAgentUid=null,this.setDate(this.period)},setDepartments:function(){this.selectedAgentUid=null,this.setDate(this.period)},ffFff:function(){console.log("!!!!!!!!")},setDate:function(e){switch(console.log(localStorage.serve_host),this.period=e,this.searchText="",this.period){case"today":var t=new Date,a=t.getDate(),s=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),t=n+"-"+s+"-"+a,console.log("today="+t),this.selectedDate=t,this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"day":console.log("day="+this.selectedDate),this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"week":console.log("week="+this.selectedDate),this.getDataByDate(this.selectedDate,"week"),this.period="week";break;case"month":console.log("month="+this.selectedDate),this.getDataByDate(this.selectedDate,"month"),this.period="month";break;case"year":console.log("year="+this.selectedDate),this.getDataByDate(this.selectedDate,"year"),this.period="year";break;default:this.period="week";break}},setBeforeDate:function(){console.log("setBeforeDate "+this.period+" "+this.selectedDate);var e=E()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=E()(e.setDate(e.getDate()-1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=E()(e.setDate(e.getDate()-7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=E()(e.setMonth(e.getMonth()-1,e.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=E()(e.setFullYear(e.getFullYear()-1,e.getMonth(),e.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},setNextDate:function(){console.log("setNextDate "+this.period+" "+this.selectedDate);var e=E()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=E()(e.setDate(e.getDate()+1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=E()(e.setDate(e.getDate()+7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=E()(e.setMonth(e.getMonth()+1,e.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=E()(e.setFullYear(e.getFullYear()+1,e.getMonth(),e.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},datePickerSetDefaultPeriod:function(e){var t=new Date,a=t.getDate(),s=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),t=n+"-"+s+"-"+a,this.selectedDate=t,console.log("datePickerSetDefaultPeriod="+e),this.period=e},setArrowActive:function(e){var t=document.querySelector(".color-blue");null!==t&&t.classList.remove("color-blue"),console.log("setArrowActive"),e.target.classList.add("color-blue")},setActive:function(e){document.querySelector(".color-dark").classList.remove("color-dark"),e.target.classList.add("color-dark");var t=document.querySelector(".color-blue");null!==t&&t.classList.remove("color-blue")},search:function(){console.log(),this.getDataByOptions()},getAgentFromChart:function(e){return this.selectedAgentUid===this.serverChartData[e["index"]]["uid"]?(this.selectedAgent=null,this.selectedAgentUid=this.s_agent_id||null,void this.getDataByOptions()):e?(this.selectedAgent=this.serverChartData[e["index"]],this.selectedAgentUid=this.serverChartData[e["index"]]["uid"],void this.getDataByOptions()):void 0},changePage:function(e){this.options.page=e,this.getDataByOptions()},goOutTo:function(e){console.log("authrize and goto",e)},updatePage:function(){this.getDataByOptions()},updateSortDesc:function(){this.getDataByOptions()},tokenIsCorrect:function(e){return!(!e||"-"===e||void 0===e)},getReportData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=localStorage.token;t.tokenIsCorrect(a)?(this.$loading(!0),D.methods.get("/report/missed/"+(e?"refresh/":"")+a).then((function(e){t.$loading(!1),!0===e.data.error&&(localStorage.token="",t.isValid=!0,alert(e.data.message)),t.$store.state.user=e.data.user,t.userData=e.data.user,t.setChartData(e.data.diagrama),t.setTableData(e.data.calls),t.setAgentMultiDropdown(e.data.agents),t.setDepartmentMultiDropdown(e.data.departments),t.datePickerSetDefaultPeriod(t.period)})).catch((function(e){t.$loading(!1),console.log(e),t.tokenIsCorrect(a)||je.push("/")}))):je.push("/")},getChartData:function(){this.getReportData()},getDataByOptions:function(){var e=this;e.generateSelectedAgentIdString(),e.generateSelectedDepartmentIdString(),e.generateSelectedTeamIdString();var t=this.selectedDate||"-",a=this.period||"-",s=this.s_department_id||"-",n=this.s_team_id||"-",l=this.selectedAgentUid||this.s_agent_id||"-",i=this.searchText||"-",o=this.options.page||"-",r=this.options.sortBy[0]||"-";"user_data"===this.options.sortBy[0]&&(r="first_name"),"business"===this.options.sortBy[0]&&(r="business_name"),"contact"===this.options.sortBy[0]&&(r="contact"),"user_data.department"===this.options.sortBy[0]&&(r="department_name"),"user_data.team"===this.options.sortBy[0]&&(r="team_name");var c=this.options.sortDesc[0]||"-";!1===this.options.sortDesc[0]&&(c="asc"),!0===this.options.sortDesc[0]&&(c="desc"),this.$loading(!0),D.methods.get("/report/missed/call/"+t+"/"+a+"/"+s+"/"+n+"/"+l+"/"+i+"/"+r+"/"+c+"/"+o).then((function(t){e.$loading(!1);var a=t.data.calls;e.setTableData(a),e.setChartData(t.data.diagrama)})).catch((function(e){console.log(e)}))},getDataByDate:function(e,t){var a=this;a.generateSelectedAgentIdString(),a.generateSelectedDepartmentIdString(),a.generateSelectedTeamIdString();var s="";""!==a.s_agent_id&&(s="/"+a.s_agent_id);var n=this.s_department_id||"-",l=this.s_team_id||"-";this.$loading(!0),D.methods.get("/report/missed/call/"+e+"/"+t+"/"+n+"/"+l+s).then((function(e){a.$loading(!1);var t=e.data.calls;a.setTableData(t),a.setChartData(e.data.diagrama),a.setDepartmentMultiDropdown(e.data.departments),a.setTeamMultiDropdown(e.data.teams),a.setAgentMultiDropdown(e.data.agents)})).catch((function(e){console.log(e)}))},getTableData:function(){var e=this;D.methods.get("/report/missed/call").then((function(t){var a=t.data.calls;e.setTableData(a)})).catch((function(e){console.log(e)}))},setChartData:function(e){var t={};this.serverChartData=e;for(var a=0;a<e.length;a++){var s=e[a].full_name,n=e[a].calls_count;t[s]=n}this.chartData=t},setTableData:function(e){this.tableCallsData=e.data,this.tablePage=parseInt(e.page),this.tablePageCount=e.pages_count},setAgentMultiDropdown:function(e){this.agent_multiple_options=e},setDepartmentMultiDropdown:function(e){console.log(e),this.department_multiple_options=e},setTeamMultiDropdown:function(e){console.log(e),this.team_multiple_options=e},generateSelectedAgentIdString:function(){console.log("generateSelectedAgentIdString");var e="";if(null!==this.agent_multiple_selected_value){var t=this.agent_multiple_selected_value,a=t.length;if(console.log(a),a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_agent_id=e},generateSelectedDepartmentIdString:function(){console.log("generateSelectedDepartmentIdString");var e="";if(null!==this.department_multiple_selected_value){var t=this.department_multiple_selected_value,a=t.length;if(console.log(a),a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_department_id=e},generateSelectedTeamIdString:function(){console.log("generateSelectedTeamIdString");var e="";if(null!==this.team_multiple_selected_value){var t=this.team_multiple_selected_value,a=t.length;if(console.log(a),a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_team_id=e},dateSelected:function(){console.log("dateSelected +"),console.log(this.selectedDate),this.getDataByDate(this.selectedDate,this.period)},updateData:function(){this.getReportData(!0)},addNewFilter:function(e){var t=this;D.methods.post("/request/filter",{name:e,page:1,day:this.selectedDate,period:this.period,department_id:this.s_department_id,team_id:this.s_team_id,user_id:this.s_agent_id,status_type:""}).then((function(){t.getFilters(),t.newFilterName="",t.selectedFilter=null})).catch((function(e){console.log(e)}))},getFilters:function(){var e=this;D.methods.get("/request/filter/all?page=1").then((function(t){e.filtersList=t.data})).catch((function(e){console.log(e)}))},deleteFilter:function(e){var t=this;console.log(e.id),D.methods.delete("/request/filter/".concat(e.id)).then((function(){t.getFilters(),t.selectedFilter=null})).catch((function(e){console.log(e)}))},setFilter:function(e){var t=this;if(console.log("setFilter__________________",e),null==e)return this.agent_multiple_selected_value=null,this.department_multiple_selected_value=null,this.team_multiple_selected_value=null,this.type_multiple_selected_value=null,void this.setUsers();this.selectedDate=e.day,this.period=e.period,console.log(this.selectedDate),console.log(this.period),e.department_id&&(this.department_multiple_selected_value=[],e.department_id.map((function(e){t.department_multiple_options.map((function(a){a.value==e&&t.department_multiple_selected_value.push(a)}))}))),e.team_id&&(this.team_multiple_selected_value=[],e.team_id.map((function(e){t.team_multiple_options.map((function(a){a.value==e&&t.team_multiple_selected_value.push(a)}))}))),e.status_type&&(this.type_multiple_selected_value=[],e.status_type.map((function(e){t.type_multiple_options.map((function(a){a.value==e&&t.type_multiple_selected_value.push(a)}))}))),e.user_id&&(console.log("--------------e.user_id--------------",e.user_id),console.log(this.agent_multiple_options),this.agent_multiple_selected_value=[],e.user_id.map((function(e){t.agent_multiple_options.map((function(a){a.value==e&&t.agent_multiple_selected_value.push(a)}))}))),this.setUsers()}},created:function(){this.getChartData(),this.getFilters()},mounted:function(){}},ne=se,le=(a("60bc"),a("6685"),a("8fea")),ie=a("891e"),oe=Object(r["a"])(ne,G,W,!1,null,"4df93a10",null),re=oe.exports;u()(oe,{VDataTable:le["a"],VPagination:ie["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Agent-Status"}},[a("div",{staticClass:"agent-status"},[a("div",{staticClass:"controls-container"},[a("div",{staticClass:"date-container"},[a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("today"),e.setActive(t)}}},[e._v("Today ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setBeforeDate(),e.setArrowActive(t)}}},[e._v("◂ ")]),a("date-picker",{staticClass:"date-item",attrs:{type:"date",valueType:"YYYY-MM-DD",format:"DD/MM/YYYY"},on:{change:function(t){return e.dateSelected()}},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setNextDate(),e.setArrowActive(t)}}},[e._v("▸ ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("day"),e.setActive(t)}}},[e._v("Day ")]),a("button",{staticClass:"button button-li date-item color-grey color-dark",on:{click:function(t){e.setDate("week"),e.setActive(t)}}},[e._v("Week ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("month"),e.setActive(t)}}},[e._v("Month ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.setDate("year"),e.setActive(t)}}},[e._v("Year ")])],1),a("div",{staticClass:"search-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text",id:"search",placeholder:"Search...",name:"search"},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),a("button",{staticClass:"button color-violet",attrs:{id:"search-button"},on:{click:function(t){e.search(e.searchText)}}},[e._v("Search ")])])]),a("div",{staticClass:"controls-container",staticStyle:{"justify-content":"space-between"}},[a("div",{staticClass:"multiselect-items",staticStyle:{display:"flex"}},[a("div",[a("label",{staticClass:"typo__label"},[e._v("Select Department(s)")]),a("multiselect",{staticStyle:{width:"fit-content"},attrs:{options:e.department_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setUsers},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.department_multiple_selected_value,callback:function(t){e.department_multiple_selected_value=t},expression:"department_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[e._v("Select Team(s)")]),a("multiselect",{attrs:{options:e.team_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setUsers},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.team_multiple_selected_value,callback:function(t){e.team_multiple_selected_value=t},expression:"team_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[e._v("Select agent(s)")]),a("multiselect",{attrs:{options:e.agent_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setUsers},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.agent_multiple_selected_value,callback:function(t){e.agent_multiple_selected_value=t},expression:"agent_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[e._v("Select type(s)")]),a("multiselect",{attrs:{options:e.type_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:e.setTypes},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(s.length)+" options selected ")]):e._e()]}}]),model:{value:e.type_multiple_selected_value,callback:function(t){e.type_multiple_selected_value=t},expression:"type_multiple_selected_value"}})],1),a("div",{staticClass:"filter-selector single-select"},[a("label",{staticClass:"typo__label"},[e._v("Select filter")]),a("multiselect",{staticClass:"single-select",attrs:{"preselect-first":!1,placeholder:"Pick some",label:"name",multiple:!1,options:e.filtersList,"track-by":"value","hide-selected":!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,searchable:!1,"show-labels":!1},on:{select:e.setFilter},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,n=(t.search,t.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"}):e._e()]}}]),model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}}),null!=e.selectedFilter?a("p",{on:{click:function(t){return e.deleteFilter(e.selectedFilter)}}},[e._v(" ✖ ")]):e._e()],1)]),a("div",[a("div",{staticClass:"filters multiselect-items"},[a("label",{staticClass:"typo__label"},[e._v("Add filter")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFilterName,expression:"newFilterName"}],staticClass:"mx-input multiselect__tags",staticStyle:{padding:"0 5px"},attrs:{type:"text",placeholder:"New filter name"},domProps:{value:e.newFilterName},on:{input:function(t){t.target.composing||(e.newFilterName=t.target.value)}}}),a("div",{staticClass:"filters-options"},[""!=e.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){e.newFilterName=""}}},[e._v("Cancel")]):e._e(),""!=e.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(t){return e.addNewFilter(e.newFilterName)}}},[e._v("Add")]):e._e()])])])]),0!==Object.keys(e.chartDataStatuses).length?a("div",{staticClass:"chart-container"},[a("h2",[e._v("Statuses")]),a("div",{ref:"statusesChartRef",staticClass:"chart"})]):e._e(),0!==Object.keys(e.chartDataPhoneStatuses).length?a("div",{staticClass:"chart-container"},[a("h2",[e._v("Phone Statuses")]),a("div",{ref:"phoneStatusesChartRef",staticClass:"chart"})]):e._e(),0===Object.keys(e.chartDataStatuses).length?a("div",{staticClass:"table-container"},[a("h1",[e._v("No Chart Data For This Period")])]):e._e(),0===Object.keys(e.chartDataPhoneStatuses).length?a("div",{staticClass:"table-container"},[a("h1",[e._v("No Chart Data For This Period")])]):e._e(),e.tableCallsData.length>0?a("div",{staticClass:"table-container"},[a("v-data-table",{staticClass:"v-data-table elevation-1",attrs:{headers:e.tableCallsHeaders,items:e.tableCallsData,"items-per-page":20,page:e.tablePage,options:e.optionsTable,"hide-default-footer":!0,"fixed-header":""},on:{"update:page":[function(t){e.tablePage=t},e.updatePage],"update:options":function(t){e.optionsTable=t},"update:sort-desc":e.updateSortDesc},scopedSlots:e._u([{key:"item.user_data",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.user_data.photo_url,alt:""}}),a("p",[e._v(e._s(s.user_data.full_name))])])]}},{key:"item.user_data.department",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("p",[e._v(e._s(s.user_data.department.name))])])]}},{key:"item.user_data.team",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("p",[e._v(e._s(s.user_data.team.name))])])]}},{key:"item.business",fn:function(t){var s=t.item;return[a("div",{staticClass:"business"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.business.business_link},on:{click:function(t){return e.goOutTo(s.business.business_link)}}},[e._v(e._s(s.business.business_name)+" ")])])]}},{key:"item.contact",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.contact.contact_link},on:{click:function(t){return e.goOutTo(s.contact.contact_link)}}},[e._v(e._s(s.contact.contact_name)+" ")])])]}},{key:"item.time_create",fn:function(t){var s=t.item;return[a("div",{staticClass:"table-date-cell"},[e._v(e._s(e.getDate(s["time_create"])))])]}}],null,!1,2219458636)}),e.tablePageCount>1?a("v-pagination",{staticClass:"table-pagination",attrs:{length:e.tablePageCount,"next-icon":e.nextIcon,"prev-icon":e.prevIcon},on:{input:e.changePage},model:{value:e.tablePage,callback:function(t){e.tablePage=t},expression:"tablePage"}}):e._e()],1):e._e(),0==e.tableCallsData.length?a("div",{staticClass:"table-container"},[a("h1",[e._v("No Table Data For This Period")])]):e._e(),e.tableTotalCallsData.length>0?a("div",{staticClass:"table-container"},[a("h1",[e._v("Total Table ")]),a("v-data-table",{staticClass:"v-data-table elevation-1",attrs:{headers:e.tableTotalCallsHeaders,items:e.tableTotalCallsData,"items-per-page":20,page:e.tableTotalPage,options:e.optionsTableTotal,"hide-default-footer":!0,"fixed-header":""},on:{"update:page":[function(t){e.tableTotalPage=t},e.updateTotalPage],"update:options":function(t){e.optionsTableTotal=t},"update:sort-desc":e.updateTotalSortDesc},scopedSlots:e._u([{key:"item.user_data",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.user_data.photo_url,alt:""}}),a("p",[e._v(e._s(s.user_data.full_name))])])]}},{key:"item.user_data.department",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("p",[e._v(e._s(s.user_data.department.name))])])]}},{key:"item.user_data.team",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("p",[e._v(e._s(s.user_data.team.name))])])]}},{key:"item.business",fn:function(t){var s=t.item;return[a("div",{staticClass:"business"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.business.business_link},on:{click:function(t){return e.goOutTo(s.business.business_link)}}},[e._v(e._s(s.business.business_name)+" ")])])]}},{key:"item.contact",fn:function(t){var s=t.item;return[a("div",{staticClass:"user"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.contact.contact_link},on:{click:function(t){return e.goOutTo(s.contact.contact_link)}}},[e._v(e._s(s.contact.contact_name)+" ")])])]}},{key:"item.time_create",fn:function(t){var s=t.item;return[a("div",{staticClass:"table-date-cell"},[e._v(e._s(e.getDate(s["time_create"])))])]}}],null,!1,2219458636)}),e.tableTotalPageCount>1?a("v-pagination",{staticClass:"table-pagination",attrs:{length:e.tableTotalPageCount,"next-icon":e.nextIcon,"prev-icon":e.prevIcon},on:{input:e.changeTotalPage},model:{value:e.tableTotalPage,callback:function(t){e.tableTotalPage=t},expression:"tableTotalPage"}}):e._e()],1):e._e(),0==e.tableTotalCallsData.length?a("div",{staticClass:"table-container"},[a("h1",[e._v("No Table Data For This Period")])]):e._e()])])},ue=[],de=(a("4de4"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("ddb0"),a("2909")),he=(a("96cf"),a("1da1")),pe=a("8eeb"),ge=a.n(pe),me={name:"AgentStatus",components:{DatePicker:X["a"],Multiselect:ae.a},data:function(){return{selectedDate:null,dateType:"date",userData:[],chartDataStatuses:[],chartDataPhoneStatuses:[],serverChartDataStatuses:null,serverChartPhoneStatuses:null,selectedUserChartStatuses:null,selectedUserChartPhoneStatuses:null,optionsTable:{},tableCallsData:[],tableCallsHeaders:[{text:"Agent",value:"user_data"},{text:"Status Type",value:"name"},{text:"Status Value",value:"value"},{text:"Status In",value:"time_start"},{text:"Status Out",value:"time_end",width:200},{text:"Status Duration",value:"duration",sortable:!1,width:150}],tablePage:null,tableSort:null,tablePageCount:null,optionsTableTotal:{},tableTotalCallsData:[],tableTotalCallsHeaders:[{text:"Day",value:"day"},{text:"Agent Name",value:"user_data"},{text:"Name",value:"name"},{text:"Value",value:"value"},{text:"Time",value:"duration"}],tableTotalPage:null,tableTotalSort:null,tableTotalPageCount:null,searchText:null,selectedAgent:null,selectedAgentUid:null,agent_multiple_options:[],agent_multiple_selected_value:null,department_multiple_options:[],department_multiple_selected_value:null,team_multiple_options:[],team_multiple_selected_value:null,type_multiple_options:[],type_multiple_selected_value:null,nextIcon:">",prevIcon:"<",s_agent_id:"",s_department_id:"",s_team_id:"",s_type_id:"",period:"week",newFilterName:"",filtersList:[],selectedFilter:null,serverChartDataValue:"",serverChartPhoneDataValue:"",phoneStatusesChartOptions:{},statusesChartOptions:{},statusesChart:null,phoneStatusesChart:null}},methods:{getPeriod:function(){return this.period},getDate:function(e){var t=new Date(1e3*e),a=E()(t).format("ll"),s=E()(t).format("hh:mm:ss a");return s+" "+a},setUsers:function(){this.selectedAgentUid=null,this.setDate(this.period)},setTypes:function(){this.selectedAgentUid=null,this.setDate(this.period)},setDepartments:function(){this.selectedAgentUid=null,this.setDate(this.period)},setDate:function(e){switch(this.period=e,this.searchText="",this.period){case"today":var t=new Date,a=t.getDate(),s=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),t=n+"-"+s+"-"+a,this.selectedDate=t,this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"day":this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"week":this.getDataByDate(this.selectedDate,"week"),this.period="week";break;case"month":this.getDataByDate(this.selectedDate,"month"),this.period="month";break;case"year":this.getDataByDate(this.selectedDate,"year"),this.period="year";break;default:this.period="week";break}},setBeforeDate:function(){console.log("setBeforeDate "+this.period+" "+this.selectedDate);var e=E()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=E()(e.setDate(e.getDate()-1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=E()(e.setDate(e.getDate()-7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=E()(e.setMonth(e.getMonth()-1,e.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=E()(e.setFullYear(e.getFullYear()-1,e.getMonth(),e.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},setNextDate:function(){console.log("setNextDate "+this.period+" "+this.selectedDate);var e=E()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=E()(e.setDate(e.getDate()+1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=E()(e.setDate(e.getDate()+7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=E()(e.setMonth(e.getMonth()+1,e.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=E()(e.setFullYear(e.getFullYear()+1,e.getMonth(),e.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},datePickerSetDefaultPeriod:function(e){var t=new Date,a=t.getDate(),s=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),t=n+"-"+s+"-"+a,this.selectedDate=t,this.period=e},setArrowActive:function(e){var t=document.querySelector(".color-blue");null!==t&&t.classList.remove("color-blue"),e.target.classList.add("color-blue")},setActive:function(e){document.querySelector(".color-dark").classList.remove("color-dark"),e.target.classList.add("color-dark");var t=document.querySelector(".color-blue");null!==t&&t.classList.remove("color-blue")},search:function(){this.getDataByOptions({url:"status"})},changePage:function(e){this.optionsTable.page=e,this.getDataByOptions({url:"status"})},changeTotalPage:function(e){this.optionsTableTotal.page=e,this.getDataByOptions({url:"total"})},goOutTo:function(e){console.log("authrize and goto",e)},updatePage:function(){this.getDataByOptions({url:"status"})},updateTotalPage:function(){this.getDataByOptions({url:"total"})},updateSortDesc:function(){this.getDataByOptions({url:"status"})},updateTotalSortDesc:function(){this.getDataByOptions({url:"total"})},tokenIsCorrect:function(e){return!(!e||"-"===e||void 0===e)},getReportData:function(){var e=arguments,t=this;return Object(he["a"])(regeneratorRuntime.mark((function a(){var s,n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.length>0&&void 0!==e[0]&&e[0],n=t,l=localStorage.token,n.tokenIsCorrect(l)?(t.$loading(!0),D.methods.get("/report/agent/status/"+(s?"refresh/":"")+l).then((function(e){n.$loading(!1),!0===e.data.error&&(localStorage.token="",n.isValid=!0,alert(e.data.message)),n.$store.state.user=e.data.user,n.userData=e.data.user,n.setChartData(e.data.diagrama),n.setTableData(e.data.status),n.setTableTotalData(e.data.total),n.setAgentMultiDropdown(e.data.agents),n.setDepartmentMultiDropdown(e.data.departments),n.setTypeMultiDropdown(e.data.types),n.datePickerSetDefaultPeriod(n.period)})).catch((function(e){n.errorHappen(e),n.tokenIsCorrect(l)||je.push("/")}))):je.push("/");case 4:case"end":return a.stop()}}),a)})))()},getDataByOptions:function(e){var t=this;return Object(he["a"])(regeneratorRuntime.mark((function a(){var s,n,l,i,o,r,c,u,d,h,p,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("-------getDataByOptions---------",e),s=t,t.generateSelectedAgentIdString(),t.generateSelectedDepartmentIdString(),t.generateSelectedTeamIdString(),t.generateSelectedTypeIdString(),n="/report/agent/status/",l=t.selectedDate||"-",i=t.period||"-",o=t.s_department_id||"-",r=t.s_team_id||"-",c=t.selectedAgentUid||t.s_agent_id||"-",u=t.searchText||"-",d=t.s_type_id||"-",h="-",p="-",g="-","status"===e.url&&(n="/report/agent/status/page/",h=t.optionsTable.page,p=t.optionsTable.page,g=t.optionsTable.page),"total"===e.url&&(n="/report/agent/status/total/page/",h=t.optionsTableTotal.page,p=t.optionsTableTotal.page,g=t.optionsTableTotal.page),"user_data"===t.optionsTable.sortBy[0]&&(p="first_name"),"business"===t.optionsTable.sortBy[0]&&(p="business_name"),"contact"===t.optionsTable.sortBy[0]&&(p="contact"),"user_data.department"===t.optionsTable.sortBy[0]&&(p="department_name"),"user_data.team"===t.optionsTable.sortBy[0]&&(p="team_name"),!1===t.optionsTable.sortDesc[0]&&(g="asc"),!0===t.optionsTable.sortDesc[0]&&(g="desc"),"day"===t.optionsTableTotal.sortBy[0]&&(p="day"),"user_data"===t.optionsTableTotal.sortBy[0]&&(p="first_name"),"name"===t.optionsTableTotal.sortBy[0]&&(p="name"),"value"===t.optionsTableTotal.sortBy[0]&&(p="value"),"duration"===t.optionsTableTotal.sortBy[0]&&(p="duration"),!1===t.optionsTableTotal.sortDesc[0]&&(g="asc"),!0===t.optionsTableTotal.sortDesc[0]&&(g="desc"),console.log("sortField3 = "+p),t.$loading(!0),console.log("options"),console.log(e),console.log("Object.keys(options).length="+Object.keys(e).length),0===Object.keys(e).length?(D.methods.get("/report/agent/status/"+l+"/"+i+"/"+o+"/"+r+"/"+c+"/"+d+"/"+u+"/"+p+"/"+g+"/"+h).then((function(t){s.$loading(!1),console.log("getDataByOptions status",e);var a=t.data.status;s.setTableData(a),s.setChartData(t.data.diagrama)})).catch((function(e){s.errorHappen(e)})),D.methods.get("/report/agent/status/total/page/"+l+"/"+i+"/"+o+"/"+r+"/"+c+"/"+d+"/"+u+"/"+p+"/"+g+"/"+h).then((function(t){s.$loading(!1),console.log("getDataByOptions total",e);var a=t.data.total;s.setTableTotalData(a),s.setChartData(t.data.diagrama)})).catch((function(e){s.errorHappen(e)}))):D.methods.get(n+l+"/"+i+"/"+o+"/"+r+"/"+c+"/"+d+"/"+u+"/"+p+"/"+g+"/"+h).then((function(t){if(s.$loading(!1),t.data.status){console.log("getDataByOptions status",e);var a=t.data.status;s.setTableData(a)}if(t.data.total){console.log("getDataByOptions total",e);var n=t.data.total;s.setTableTotalData(n)}s.setChartData(t.data.diagrama)})).catch((function(e){s.errorHappen(e)}));case 39:case"end":return a.stop()}}),a)})))()},getDataByDate:function(e,t){var a=this;return Object(he["a"])(regeneratorRuntime.mark((function s(){var n,l,i,o,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=a,n.generateSelectedAgentIdString(),n.generateSelectedDepartmentIdString(),n.generateSelectedTeamIdString(),a.generateSelectedTypeIdString(),l="",""!==n.s_type_id&&(l="/"+n.s_type_id),i=a.s_department_id||"-",o=a.s_team_id||"-",r=a.s_agent_id||"-",a.$loading(!0),D.methods.get("/report/agent/status/page/"+e+"/"+t+"/"+i+"/"+o+"/"+r+l).then((function(e){n.$loading(!1);var t=e.data.status;n.setTableData(t),n.setChartData(e.data.diagrama),n.setDepartmentMultiDropdown(e.data.departments),n.setTeamMultiDropdown(e.data.teams),n.setAgentMultiDropdown(e.data.agents)})).catch((function(e){n.errorHappen(e)})),D.methods.get("/report/agent/status/total/page/"+e+"/"+t+"/"+i+"/"+o+"/"+r+l).then((function(e){n.$loading(!1);var t=e.data.total;n.setTableTotalData(t)})).catch((function(e){n.errorHappen(e)}));case 13:case"end":return s.stop()}}),s)})))()},getAgentFromChartStatuses:function(e){this.selectedUserChartStatuses=this.serverChartDataStatuses.data[e.index]},getAgentFromChartPhoneStatuses:function(e){this.selectedUserChartPhoneStatuses=this.serverChartPhoneStatuses.data[e.index]},setTableData:function(e){this.tableCallsData=e.data,this.tablePage=parseInt(e.page),this.tablePageCount=e.pages_count},setTableTotalData:function(e){this.tableTotalCallsData=e.data,this.tableTotalPage=parseInt(e.page),this.tableTotalPageCount=e.pages_count},setAgentMultiDropdown:function(e){this.agent_multiple_options=e},setDepartmentMultiDropdown:function(e){this.department_multiple_options=e},setTeamMultiDropdown:function(e){this.team_multiple_options=e},setTypeMultiDropdown:function(e){this.type_multiple_options=e},generateSelectedAgentIdString:function(){var e="";if(null!==this.agent_multiple_selected_value){var t=this.agent_multiple_selected_value,a=t.length;if(a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_agent_id=e},generateSelectedDepartmentIdString:function(){var e="";if(null!==this.department_multiple_selected_value){var t=this.department_multiple_selected_value,a=t.length;if(a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_department_id=e},generateSelectedTeamIdString:function(){var e="";if(null!==this.team_multiple_selected_value){var t=this.team_multiple_selected_value,a=t.length;if(a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_team_id=e},generateSelectedTypeIdString:function(){var e="";if(null!==this.type_multiple_selected_value){var t=this.type_multiple_selected_value,a=t.length;if(a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_type_id=e},dateSelected:function(){this.getDataByDate(this.selectedDate,this.period)},updateData:function(){this.getReportData(!0)},errorHappen:function(e){console.log("error : ",e),alert("Something went wrong!"),this.$loading(!1),this.getReportData()},uniqString:function(e){if(""==e)return"";var t=e.split(",").filter(Boolean),a=t.filter(Boolean),s=Object(de["a"])(new Set(a)),n=s+"";return n},addNewFilter:function(e){this.getLegendsData();var t=this;D.methods.post("/request/filter",{name:e,page:2,day:this.selectedDate,period:this.period,department_id:this.s_department_id,team_id:this.s_team_id,user_id:this.s_agent_id,status_type:this.s_type_id,chart_status:this.serverChartDataValue,chart_phone_status:this.serverChartPhoneDataValue}).then((function(){t.getFilters(),t.newFilterName="",t.selectedFilter=null,t.serverChartDataValue="",t.serverChartPhoneDataValue=""})).catch((function(e){console.log(e)}))},getFilters:function(){var e=this;D.methods.get("/request/filter/all?page=2").then((function(t){e.filtersList=t.data})).catch((function(e){console.log(e)}))},deleteFilter:function(e){var t=this;D.methods.delete("/request/filter?id=".concat(e.id)).then((function(){t.getFilters(),t.selectedFilter=null})).catch((function(e){console.log(e)}))},setFilter:function(e){var t=this;if(null==e)return this.statusesChart.resetSeries(),this.phoneStatusesChart.resetSeries(),this.agent_multiple_selected_value=null,this.department_multiple_selected_value=null,this.team_multiple_selected_value=null,void(this.type_multiple_selected_value=null);this.selectedDate=e.day,this.period=e.period,this.serverChartDataValue=e.chart_status,this.serverChartPhoneDataValue=e.chart_phone_status,e.department_id&&(this.department_multiple_selected_value=[],e.department_id.map((function(e){t.department_multiple_options.map((function(a){a.value==e&&t.department_multiple_selected_value.push(a)}))}))),e.team_id&&(this.team_multiple_selected_value=[],e.team_id.map((function(e){t.team_multiple_options.map((function(a){a.value==e&&t.team_multiple_selected_value.push(a)}))}))),e.status_type&&(this.type_multiple_selected_value=[],e.status_type.map((function(e){t.type_multiple_options.map((function(a){a.value==e&&t.type_multiple_selected_value.push(a)}))}))),e.user_id&&(this.agent_multiple_selected_value=[],e.user_id.map((function(e){t.agent_multiple_options.map((function(a){a.value==e&&t.agent_multiple_selected_value.push(a)}))}))),this.setUsers()},setChartFilter:function(e,t,a){if(console.log(e,t,a),null!=t){var s=e.data.filter((function(e){return e.status_value==t}));if("chartDataStatuses"==a){for(var n={},l=0;l<s.length;l++){var i=s[l].x,o=s[l].y;n[i]=o}this.chartDataStatuses=n}if("chartDataPhoneStatuses"==a){for(var r={},c=0;c<s.length;c++){var u=s[c].x,d=s[c].y;r[u]=d}this.chartDataPhoneStatuses=r}}},secondsToTime:function(e){var t=60*e,a=new Date(1970,0,1);a.setSeconds(t);var s=a.toTimeString().substr(0,8);return t>86399&&(s=Math.floor((a-Date.parse("1/1/70"))/36e5)+s.substr(2)),s},setChartData:function(e){var t=this;return Object(he["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t,0==e.length&&(t.chartDataStatuses=[],t.chartDataPhoneStatuses=[]),e.map((function(e){if("status"==e.name){var a=e.data,n={};t.serverChartDataStatuses=e;var l={chart:{height:350,type:"bar",stacked:!0,animations:{enabled:!1,dynamicAnimation:{enabled:!1}},events:{}},dataLabels:{enabled:!1},series:e.chart.hours,xaxis:{categories:e.chart.names},responsive:[{breakpoint:280,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],fill:{opacity:1},legend:{position:"right",offsetX:0,offsetY:50},tooltip:{y:{formatter:function(e){var t=s.secondsToTime(e);return t}}}};t.statusesChartOptions=l,t.renderStatusesChart();for(var i=0;i<a.length;i++){var o=a[i].x,r=a[i].y;n[o]=r}t.chartDataStatuses=n}if("phone_status"==e.name){var c=e.data,u={};t.serverChartPhoneStatuses=e;var d={chart:{height:350,type:"bar",stacked:!0,animations:{enabled:!1,dynamicAnimation:{enabled:!1}},events:{}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},series:e.chart.hours,xaxis:{categories:e.chart.names},responsive:[{breakpoint:280,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],fill:{opacity:1},legend:{position:"right",offsetX:0,offsetY:50},tooltip:{y:{formatter:function(e){var t=s.secondsToTime(e);return t}}}};t.phoneStatusesChartOptions=d,t.renderPhoneStatusesChart();for(var h=0;h<e.data.length;h++){var p=c[h].x,g=c[h].y;u[p]=g}t.chartDataPhoneStatuses=u}}));case 3:case"end":return a.stop()}}),a)})))()},renderStatusesChart:function(){var e=this;return Object(he["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!=e.statusesChart&&null!=e.statusesChart.ohYeahThisChartHasBeenRendered&&e.statusesChart.destroy(),a=e,e.statusesChart=new ge.a(e.$refs.statusesChartRef,e.statusesChartOptions),e.statusesChart.render().then((function(){return e.statusesChart.ohYeahThisChartHasBeenRendered=!0})).then((function(){if(e.serverChartDataValue&&e.selectedFilter)for(var t=function(e){setTimeout((function(){a.statusesChart.toggleSeries(a.serverChartDataValue[e])}),500)},s=0;s<e.serverChartDataValue.length;s++)t(s)}));case 4:case"end":return t.stop()}}),t)})))()},renderPhoneStatusesChart:function(){var e=this;return Object(he["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!=e.phoneStatusesChart&&null!=e.phoneStatusesChart.ohYeahThisChartHasBeenRendered&&e.phoneStatusesChart.destroy(),a=e,e.phoneStatusesChart=new ge.a(e.$refs.phoneStatusesChartRef,e.phoneStatusesChartOptions),e.phoneStatusesChart.render().then((function(){return e.phoneStatusesChart.ohYeahThisChartHasBeenRendered=!0})).then((function(){if(e.serverChartPhoneDataValue&&e.selectedFilter)for(var t=function(e){setTimeout((function(){a.phoneStatusesChart.toggleSeries(a.serverChartPhoneDataValue[e])}),500)},s=0;s<e.serverChartPhoneDataValue.length;s++)t(s)}));case 4:case"end":return t.stop()}}),t)})))()},getLegendsData:function(){this.serverChartDataValue="",this.serverChartPhoneDataValue="";var e=this.$refs.statusesChartRef.getElementsByClassName("apexcharts-legend-series");console.log(e);for(var t=0;t<e.length;t++)"true"==e[t].getAttribute("data:collapsed")&&(this.serverChartDataValue+=","+e[t].getAttribute("seriesname")+",");var a=this.$refs.phoneStatusesChartRef.getElementsByClassName("apexcharts-legend-series");console.log(a);for(var s=0;s<a.length;s++)"true"==a[s].getAttribute("data:collapsed")&&(this.serverChartPhoneDataValue+=","+a[s].getAttribute("seriesname")+",")}},created:function(){var e=Object(he["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setUsers();case 2:return e.next=4,this.getReportData();case 4:return e.next=6,this.getFilters();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{},watch:{},mounted:function(){}},fe=me,_e=(a("28df"),Object(r["a"])(fe,ce,ue,!1,null,"55dbf924",null)),ve=_e.exports;u()(_e,{VDataTable:le["a"],VPagination:ie["a"]});var be={name:"HelloWorld",components:{HeaderComponent:R},data:function(){return{activeTab:null,tabs:[{name:"Missed Calls",path:"/dashboard/missed-calls",component:re},{name:"Agent Status Time Tracking",path:"/dashboard/agent-status",component:ve}],selectedDate:null,dateType:"date",chartData:[],userData:[],tableCallsData:[],serverChartData:null,options:{},tableCallsHeaders:[{text:"Agent",value:"user_data"},{text:"Business Name",value:"business"},{text:"Contact",value:"contact",width:200},{text:"Phone",value:"phone",sortable:!1,width:150},{text:"Created Time",value:"time_create",sortable:!1,width:120}],tablePage:null,tableSort:null,tablePageCount:null,tableItemsPerPage:null,searchText:null,selectedAgent:null,selectedAgentUid:null,agent_multiple_options:[],agent_multiple_selected_value:null,nextIcon:">",prevIcon:"<",s_agent_id:"",period:"week"}},methods:{getPeriod:function(){return this.period},getDate:function(e){var t=new Date(1e3*e),a=E()(t).format("ll"),s=E()(t).format("hh:mm:ss a");return s+" "+a},setUsers:function(){this.selectedAgentUid=null,this.setDate(this.period)},ffFff:function(){console.log("!!!!!!!!")},setDate:function(e){switch(this.period=e,this.searchText="",this.period){case"today":var t=new Date,a=t.getDate(),s=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),t=n+"-"+s+"-"+a,console.log("today="+t),this.selectedDate=t,this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"day":console.log("day="+this.selectedDate),this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"week":console.log("week="+this.selectedDate),this.getDataByDate(this.selectedDate,"week"),this.period="week";break;case"month":console.log("month="+this.selectedDate),this.getDataByDate(this.selectedDate,"month"),this.period="month";break;case"year":console.log("year="+this.selectedDate),this.getDataByDate(this.selectedDate,"year"),this.period="year";break;default:this.period="week";break}},setBeforeDate:function(){console.log("setBeforeDate "+this.period+" "+this.selectedDate);var e=E()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=E()(e.setDate(e.getDate()-1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=E()(e.setDate(e.getDate()-7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=E()(e.setMonth(e.getMonth()-1,e.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=E()(e.setFullYear(e.getFullYear()-1,e.getMonth(),e.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},setNextDate:function(){console.log("setNextDate "+this.period+" "+this.selectedDate);var e=E()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=E()(e.setDate(e.getDate()+1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=E()(e.setDate(e.getDate()+7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=E()(e.setMonth(e.getMonth()+1,e.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=E()(e.setFullYear(e.getFullYear()+1,e.getMonth(),e.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},datePickerSetDefaultPeriod:function(e){var t=new Date,a=t.getDate(),s=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),t=n+"-"+s+"-"+a,this.selectedDate=t,console.log("datePickerSetDefaultPeriod="+e),this.period=e},setArrowActive:function(e){var t=document.querySelector(".color-blue");null!==t&&t.classList.remove("color-blue"),console.log("setArrowActive"),e.target.classList.add("color-blue")},setActive:function(e){document.querySelector(".color-dark").classList.remove("color-dark"),e.target.classList.add("color-dark");var t=document.querySelector(".color-blue");null!==t&&t.classList.remove("color-blue")},search:function(){console.log(),this.getDataByOptions()},getAgentFromChart:function(e){return this.selectedAgentUid===this.serverChartData[e["index"]]["uid"]?(this.selectedAgent=null,this.selectedAgentUid=this.s_agent_id||null,void this.getDataByOptions()):e?(this.selectedAgent=this.serverChartData[e["index"]],this.selectedAgentUid=this.serverChartData[e["index"]]["uid"],void this.getDataByOptions()):void 0},changePage:function(e){this.options.page=e,this.getDataByOptions()},goOutTo:function(e){console.log("authrize and goto",e)},updatePage:function(){this.getDataByOptions()},updateSortDesc:function(){this.getDataByOptions()},tokenIsCorrect:function(e){return!(!e||"-"===e||void 0===e)},getReportData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,a=localStorage.token;t.tokenIsCorrect(a)?(this.$loading(!0),D.methods.get("/report/missed/"+(e?"refresh/":"")+a).then((function(e){t.$loading(!1),!0===e.data.error&&(localStorage.token="",t.isValid=!0,alert(e.data.message)),t.$store.state.user=e.data.user,t.userData=e.data.user,t.setChartData(e.data.diagrama),t.setTableData(e.data.calls),t.setAgentMultiDropdown(e.data.agents),t.datePickerSetDefaultPeriod(t.period)})).catch((function(e){t.$loading(!1),console.log(e),t.tokenIsCorrect(a)||je.push("/")}))):je.push("/")},getChartData:function(){this.getReportData()},getDataByOptions:function(){var e=this;e.generateSelectedAgentIdString();var t=this.selectedDate||"-",a=this.period||"-",s=this.selectedAgentUid||this.s_agent_id||"-",n=this.searchText||"-",l=this.options.page||"-",i=this.options.sortBy[0]||"-";"user_data"===this.options.sortBy[0]&&(i="first_name"),"business"===this.options.sortBy[0]&&(i="business_name"),"contact"===this.options.sortBy[0]&&(i="contact");var o=this.options.sortDesc[0]||"-";!1===this.options.sortDesc[0]&&(o="asc"),!0===this.options.sortDesc[0]&&(o="desc"),this.$loading(!0),D.methods.get("/report/missed/call/"+t+"/"+a+"/"+s+"/"+n+"/"+i+"/"+o+"/"+l).then((function(t){e.$loading(!1);var a=t.data.calls;e.setTableData(a),e.setChartData(t.data.diagrama)})).catch((function(e){console.log(e)}))},getDataByDate:function(e,t){var a=this;a.generateSelectedAgentIdString();var s="";""!==a.s_agent_id&&(s="/"+a.s_agent_id),this.$loading(!0),D.methods.get("/report/missed/call/"+e+"/"+t+s).then((function(e){a.$loading(!1);var t=e.data.calls;a.setTableData(t),a.setChartData(e.data.diagrama)})).catch((function(e){console.log(e)}))},getTableData:function(){var e=this;D.methods.get("/report/missed/call").then((function(t){var a=t.data.calls;e.setTableData(a)})).catch((function(e){console.log(e)}))},setChartData:function(e){var t={};this.serverChartData=e;for(var a=0;a<e.length;a++){var s=e[a].full_name,n=e[a].calls_count;t[s]=n}this.chartData=t},setTableData:function(e){this.tableCallsData=e.data,this.tablePage=parseInt(e.page),this.tablePageCount=e.pages_count},setAgentMultiDropdown:function(e){console.log(e),this.agent_multiple_options=e},generateSelectedAgentIdString:function(){console.log("generateSelectedAgentIdString");var e="";if(null!==this.agent_multiple_selected_value){var t=this.agent_multiple_selected_value,a=t.length;if(console.log(a),a)for(var s=0;s<a;s++)e+=t[s].value,s+1!==a&&(e+=",")}this.s_agent_id=e},dateSelected:function(){console.log("dateSelected +"),console.log(this.selectedDate),this.getDataByDate(this.selectedDate,this.period)},updateData:function(){this.getReportData(!0)}},created:function(){},mounted:function(){}},De=be,ye=(a("3201"),a("71a3")),Ce=a("fe57"),ke=Object(r["a"])(De,B,I,!1,null,"4d1349ec",null),Se=ke.exports;u()(ke,{VTab:ye["a"],VTabs:Ce["a"]}),s["a"].use(m["a"]);var we=[{path:"/",name:"Login",component:F},{path:"/dashboard/:id",name:"Dashboard",component:Se,children:[{path:"/dashboard/missed-calls",component:re},{path:"/dashboard/agent-status",component:ve}]}],Te=new m["a"]({mode:"history",base:"/",routes:we}),je=Te,Ye=a("2f62");s["a"].use(Ye["a"]);var xe=new Ye["a"].Store({state:{},mutations:{},actions:{}}),Pe=a("f309");s["a"].use(Pe["a"]);var Me=new Pe["a"]({icons:{iconfont:"fa"}}),Ae=a("ca55"),Oe=a("1321"),Fe=a.n(Oe);s["a"].config.productionTip=!1,s["a"].use(g["a"]),s["a"].use(Ye["a"]),s["a"].use(Fe.a),s["a"].use(Ae["a"],{text:"Loading ...",loading:!1,classes:["myclass"]}),new s["a"]({router:je,store:xe,vuetify:Me,render:function(e){return e(p)}}).$mount("#app")},6685:function(e,t,a){"use strict";var s=a("e663"),n=a.n(s);n.a},"6d80":function(e,t,a){e.exports=a.p+"img/logo-dashboard.0ddf9496.png"},"6f08":function(e,t,a){},"7c55":function(e,t,a){"use strict";var s=a("6f08"),n=a.n(s);n.a},9184:function(e,t,a){"use strict";var s=a("dbcb"),n=a.n(s);n.a},b2f4:function(e,t,a){},b463:function(e,t,a){e.exports=a.p+"img/logo-login.68e4f711.png"},dbcb:function(e,t,a){},deb4:function(e,t,a){},e663:function(e,t,a){},e8fa:function(e,t,a){},feea:function(e,t,a){"use strict";var s=a("e8fa"),n=a.n(s);n.a}});
//# sourceMappingURL=app.c7a87ab1.js.map