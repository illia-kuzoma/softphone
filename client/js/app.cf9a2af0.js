(function(t){function e(e){for(var s,i,o=e[0],r=e[1],c=e[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(h.length)h.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],s=!0,o=1;o<a.length;o++){var r=a[o];0!==n[r]&&(s=!1)}s&&(l.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},l=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=r;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"28df":function(t,e,a){"use strict";var s=a("deb4"),n=a.n(s);n.a},3201:function(t,e,a){"use strict";var s=a("b2f4"),n=a.n(s);n.a},"3dd0":function(t,e,a){"use strict";var s=a("cdfc"),n=a.n(s);n.a},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=l(t);return a(e)}function l(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=l,t.exports=n,n.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("router-view")],1)},l=[],i={name:"App",components:{},data:function(){return{}}},o=i,r=(a("7c55"),a("2877")),c=a("6544"),u=a.n(c),d=a("7496"),h=Object(r["a"])(o,n,l,!1,null,null,null),p=h.exports;u()(h,{VApp:d["a"]});var g=a("8c4f"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{id:"login",fluid:"","fill-height":""}},[s("v-content",[s("v-container",{attrs:{fluid:"","fill-height":""}},[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{staticClass:"login-form"},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{staticClass:"login-header",attrs:{flat:""}},[s("v-img",{staticClass:"shrink login-logo",attrs:{alt:"Logo",contain:"",transition:"scale-transition",width:"163",src:a("b463")}})],1),s("v-card-text",[s("v-form",{staticClass:"form"},[s("p",{staticClass:"placeholder"},[t._v("EMAIL")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:{inputWarning:t.isValid},attrs:{type:"text",id:"email",required:"",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("p",{staticClass:"placeholder"},[t._v("PASSWORD")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:{inputWarning:t.isValid},attrs:{id:"password",type:"password",required:"",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])],1),s("v-card-actions",[s("v-btn",{staticClass:"login-button",on:{click:t.validate}},[t._v("Log In ")])],1)],1)],1)],1)],1)],1)],1)},f=[],_=a("bc3a"),v=a.n(_),b={name:"HttpService",props:{},data:function(){return{}},methods:{post:function(t,e){var a=localStorage.serve_host+t;return v.a.post(a,e)},get:function(t){var e=localStorage.serve_host+t;return v.a.get(e)},delete:function(t,e){var a=localStorage.serve_host+t;return v.a.delete(a,e)}}},D={name:"Login",data:function(){return{email:"",password:"",isValid:!1}},methods:{validate:function(){""!==this.email&&""!==this.password||(this.isValid=!0),""!==this.email&&""!==this.password&&this.login()},login:function(){var t=this;this.$loading(!0),""!==localStorage.serve_host&&(localStorage.serve_host=""),"localhost"===window.location.hostname?localStorage.serve_host="http://callcentr.wellnessliving.com":"callcentrcl.wellnessliving.com"===window.location.hostname?localStorage.serve_host="http://callcentr.wellnessliving.com":localStorage.serve_host="http://softphone",b.methods.post("/auth",{email:this.email,password:this.password}).then((function(e){t.$loading(!1),e.data.user&&(t.$store.state.user=e.data.user,localStorage.token=e.data.token,Tt.push("/dashboard/missed-calls")),!0===e.data.error&&(localStorage.token="-",t.isValid=!0,alert(e.data.message))})).catch((function(e){localStorage.token="-",console.log(e),alert("Something went wrong"),t.$loading(!1)}))},forgotFunc:function(){console.log("forgot password")}},created:function(){console.log("think about redirect to dashboard If token not empty")}},y=D,C=(a("9184"),a("8336")),k=a("b0af"),S=a("99d9"),w=a("a523"),T=a("a75b"),j=a("0e8f"),Y=a("4bd4"),x=a("adda"),P=a("a722"),M=a("71d9"),A=Object(r["a"])(y,m,f,!1,null,"76425560",null),O=A.exports;u()(A,{VBtn:C["a"],VCard:k["a"],VCardActions:S["a"],VCardText:S["b"],VContainer:w["a"],VContent:T["a"],VFlex:j["a"],VForm:Y["a"],VImg:x["a"],VLayout:P["a"],VToolbar:M["a"]});var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"dashboard"}},[a("HeaderComponent",{attrs:{userObject:t.userData}}),a("div",{staticClass:"dashboard"},[a("div",[a("v-tabs",{staticClass:"tabs",attrs:{centered:"",grow:"",height:"60px"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabs,(function(e){return a("v-tab",{key:e.id,attrs:{to:e.path,exact:""}},[t._v(" "+t._s(e.name)+" ")])})),1),a("router-view")],1)])],1)},B=[],I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"row"},[s("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Logo",contain:"",transition:"scale-transition",width:"257",src:a("6d80")}}),s("div",{staticClass:"side"},[t.userData?s("img",{staticClass:"round",attrs:{alt:"user",src:t.userData.photo_url}}):t._e(),t.userData?s("div",{staticClass:"menu"},[s("div",{staticClass:"username",on:{click:t.showModal}},[s("p",{staticClass:"name"},[t._v(t._s(t.userData.first_name)+" "+t._s(t.userData.last_name))]),s("p",{staticClass:"role"},[t._v(t._s(t.userData.role))])]),t._m(0)]):t._e()])],1)])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"submenu"},[a("p",[t._v("Login")])])}],$={name:"HeaderComponent",props:["userObject"],data:function(){return{isShowDropdown:!1,userData:null}},methods:{showModal:function(){this.isShowDropdown=!0},getUserData:function(){var t=this.$store.state.user;this.userData=t,console.log(this.$store.state),console.log(this.$store.state.user)},setUserData:function(t){console.log("HeaderComponent setUserData newValue"),this.userData=t}},watch:{userObject:function(t){this.setUserData(t)}},created:function(){this.getUserData()}},V=$,L=(a("3dd0"),Object(r["a"])(V,I,N,!1,null,"18defc4a",null)),U=L.exports;u()(L,{VImg:x["a"]});a("411c");var R,z,H=a("c1df"),q=a.n(H),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Missed-Calls"}},[a("div",{staticClass:"missed-calls"},[a("div",{staticClass:"controls-container"},[a("div",{staticClass:"date-container"},[a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("today"),t.setActive(e)}}},[t._v("Today ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setBeforeDate(),t.setArrowActive(e)}}},[t._v("◂ ")]),a("date-picker",{staticClass:"date-item",attrs:{type:"date",valueType:"YYYY-MM-DD",format:"DD/MM/YYYY"},on:{change:function(e){return t.dateSelected()}},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}}),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setNextDate(),t.setArrowActive(e)}}},[t._v("▸ ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("day"),t.setActive(e)}}},[t._v("Day ")]),a("button",{staticClass:"button button-li date-item color-grey color-dark",on:{click:function(e){t.setDate("week"),t.setActive(e)}}},[t._v("Week ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("month"),t.setActive(e)}}},[t._v("Month ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("year"),t.setActive(e)}}},[t._v("Year ")])],1),a("div",{staticClass:"search-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",id:"search",placeholder:"Search...",name:"search"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),a("button",{staticClass:"button color-violet",attrs:{id:"search-button"},on:{click:function(e){t.search(t.searchText)}}},[t._v("Search ")])]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){return t.updateData()}}},[t._v(" Update Data ")])]),a("div",{staticClass:"controls-container",staticStyle:{"justify-content":"space-between"}},[a("div",{staticClass:"multiselect-items",staticStyle:{display:"flex"}},[a("div",[a("label",{staticClass:"typo__label"},[t._v("Select Department(s)")]),a("multiselect",{attrs:{options:t.department_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setUsers},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.department_multiple_selected_value,callback:function(e){t.department_multiple_selected_value=e},expression:"department_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[t._v("Select Team(s)")]),a("multiselect",{attrs:{options:t.team_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setUsers},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.team_multiple_selected_value,callback:function(e){t.team_multiple_selected_value=e},expression:"team_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[t._v("Select agent(s)")]),a("multiselect",{attrs:{options:t.agent_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setUsers},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.agent_multiple_selected_value,callback:function(e){t.agent_multiple_selected_value=e},expression:"agent_multiple_selected_value"}})],1),a("div",{staticClass:"filter-selector"},[a("label",{staticClass:"typo__label"},[t._v("Select filter")]),a("multiselect",{attrs:{options:t.filtersList,multiple:!1,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setFilter},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.selectedFilter,callback:function(e){t.selectedFilter=e},expression:"selectedFilter"}}),null!=t.selectedFilter?a("p",{on:{click:function(e){return t.deleteFilter(t.selectedFilter)}}},[t._v(" ✖ ")]):t._e()],1)]),a("div",[a("div",{staticClass:"filters multiselect-items"},[a("label",{staticClass:"typo__label"},[t._v("Add filter")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newFilterName,expression:"newFilterName"}],staticClass:"mx-input multiselect__tags",staticStyle:{padding:"0 5px"},attrs:{type:"text",placeholder:"New filter name"},domProps:{value:t.newFilterName},on:{input:function(e){e.target.composing||(t.newFilterName=e.target.value)}}}),a("div",{staticClass:"filters-options"},[""!=t.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.newFilterName=""}}},[t._v("Cancel")]):t._e(),""!=t.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){return t.addNewFilter(t.newFilterName)}}},[t._v("Add")]):t._e()])])])]),0!==Object.keys(t.chartData).length?a("div",{staticClass:"chart-container"},[a("h2",[t._v("MISSED CALLS")]),t.chartData?a("line-chart",{staticClass:"chart",attrs:{id:"chartId",chartObject:t.chartData,"is-resizable":!0,"use-css-transforms":!0},on:{clicked:t.getAgentFromChart,close:t.ffFff}}):t._e()],1):t._e(),0===Object.keys(t.chartData).length?a("div",{staticClass:"table-container"},[a("h1",[t._v("No Chart Data For This Period")])]):t._e(),t.tableCallsData.length>0?a("div",{staticClass:"table-container"},[a("v-data-table",{staticClass:"v-data-table elevation-1",attrs:{headers:t.tableCallsHeaders,items:t.tableCallsData,"items-per-page":20,page:t.tablePage,options:t.options,"hide-default-footer":!0,"fixed-header":""},on:{"update:page":[function(e){t.tablePage=e},t.updatePage],"update:options":function(e){t.options=e},"update:sort-desc":t.updateSortDesc},scopedSlots:t._u([{key:"item.user_data",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.user_data.photo_url,alt:""}}),a("p",[t._v(t._s(s.user_data.full_name))])])]}},{key:"item.user_data.department",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("p",[t._v(t._s(s.user_data.department.name))])])]}},{key:"item.user_data.team",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("p",[t._v(t._s(s.user_data.team.name))])])]}},{key:"item.business",fn:function(e){var s=e.item;return[a("div",{staticClass:"business"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.business.business_link},on:{click:function(e){return t.goOutTo(s.business.business_link)}}},[t._v(t._s(s.business.business_name)+" ")])])]}},{key:"item.contact",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.contact.contact_link},on:{click:function(e){return t.goOutTo(s.contact.contact_link)}}},[t._v(t._s(s.contact.contact_name)+" ")])])]}},{key:"item.time_create",fn:function(e){var s=e.item;return[a("div",{staticClass:"table-date-cell"},[t._v(t._s(t.getDate(s["time_create"])))])]}}],null,!1,2219458636)}),t.tablePageCount>1?a("v-pagination",{staticClass:"table-pagination",attrs:{length:t.tablePageCount,"next-icon":t.nextIcon,"prev-icon":t.prevIcon},on:{input:t.changePage},model:{value:t.tablePage,callback:function(e){t.tablePage=e},expression:"tablePage"}}):t._e()],1):t._e(),0==t.tableCallsData.length?a("div",{staticClass:"table-container"},[a("h1",[t._v("No Table Data For This Period")])]):t._e()])])},G=[],W=(a("d81d"),a("ec45")),X=a("1fca"),J={extends:X["a"],props:["chartObject"],data:function(){return{gradient:null,clickedGradient:null,type:"horizontalBar",chartdata:{labels:[],datasets:[{label:"MISSED CALLS",data:[],backgroundColor:[]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},animation:{duration:0},scales:{yAxes:[{display:!0,gridLines:{display:!1},ticks:{beginAtZero:!0,min:0,precision:0}}],xAxes:[{gridLines:{display:!1}}]}}}},methods:{setGistData:function(t){var e=this,a=t,s=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450);s.addColorStop(0,"#727cf5"),s.addColorStop(1,"#9075da");var n=this.$refs.canvas.getContext("2d").createLinearGradient(0,0,0,450);for(var l in n.addColorStop(0,"#6421A7"),n.addColorStop(1,"#6421A7"),this.backgroundColor=[],this.chartdata.labels=[],this.chartdata.datasets[0].data=[],a)this.chartdata.labels.push(l),this.chartdata.datasets[0].data.push(a[l]),this.chartdata.datasets[0]["backgroundColor"].push(s);this.options["onClick"]=function(t,a){if(a[0]){var l=a[0]["_index"],i=a[0]["_chart"].data.labels[l],o=a[0]["_chart"].data.datasets[0].data[l],r={index:l,name:i,value:o};e.cellClickEvent(r);var c=e.chartdata.datasets[0]["backgroundColor"];if(c[l]===n)c[l]=s;else{for(var u=0;u<c.length;u++)c[u]=s;c[l]=n}}e.renderChart(e.chartdata,e.options)},this.renderChart(this.chartdata,this.options)},cellClickEvent:function(t){this.$emit("clicked",t)}},watch:{chartObject:function(t){this.renderChart({},{}),this.setGistData(t)}},mounted:function(){this.setGistData(this.chartObject)}},Z=J,K=Object(r["a"])(Z,R,z,!1,null,null,null),Q=K.exports,tt=a("8e5f"),et=a.n(tt),at={name:"MissedCalls",components:{DatePicker:W["a"],LineChart:Q,Multiselect:et.a},data:function(){return{selectedDate:null,dateType:"date",chartData:[],userData:[],tableCallsData:[],serverChartData:null,options:{},tableCallsHeaders:[{text:"Agent",value:"user_data"},{text:"Department",value:"user_data.department"},{text:"Team",value:"user_data.team"},{text:"Business Name",value:"business"},{text:"Contact",value:"contact",width:200},{text:"Phone",value:"phone",sortable:!1,width:150},{text:"Created Time",value:"time_create",sortable:!1,width:120}],tablePage:null,tableSort:null,tablePageCount:null,tableItemsPerPage:null,searchText:null,selectedAgent:null,selectedAgentUid:null,agent_multiple_options:[],agent_multiple_selected_value:null,department_multiple_options:[],department_multiple_selected_value:null,team_multiple_options:[],team_multiple_selected_value:null,nextIcon:">",prevIcon:"<",s_agent_id:"",s_department_id:"",s_team_id:"",period:"week",newFilterName:"",filtersList:[],selectedFilter:null}},methods:{getPeriod:function(){return this.period},getDate:function(t){var e=new Date(1e3*t),a=q()(e).format("ll"),s=q()(e).format("hh:mm:ss a");return s+" "+a},setUsers:function(){this.selectedAgentUid=null,this.setDate(this.period)},setDepartments:function(){this.selectedAgentUid=null,this.setDate(this.period)},ffFff:function(){console.log("!!!!!!!!")},setDate:function(t){switch(console.log(localStorage.serve_host),this.period=t,this.searchText="",this.period){case"today":var e=new Date,a=e.getDate(),s=e.getMonth()+1,n=e.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),e=n+"-"+s+"-"+a,console.log("today="+e),this.selectedDate=e,this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"day":console.log("day="+this.selectedDate),this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"week":console.log("week="+this.selectedDate),this.getDataByDate(this.selectedDate,"week"),this.period="week";break;case"month":console.log("month="+this.selectedDate),this.getDataByDate(this.selectedDate,"month"),this.period="month";break;case"year":console.log("year="+this.selectedDate),this.getDataByDate(this.selectedDate,"year"),this.period="year";break;default:this.period="week";break}},setBeforeDate:function(){console.log("setBeforeDate "+this.period+" "+this.selectedDate);var t=q()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=q()(t.setDate(t.getDate()-1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=q()(t.setDate(t.getDate()-7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=q()(t.setMonth(t.getMonth()-1,t.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=q()(t.setFullYear(t.getFullYear()-1,t.getMonth(),t.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},setNextDate:function(){console.log("setNextDate "+this.period+" "+this.selectedDate);var t=q()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=q()(t.setDate(t.getDate()+1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=q()(t.setDate(t.getDate()+7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=q()(t.setMonth(t.getMonth()+1,t.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=q()(t.setFullYear(t.getFullYear()+1,t.getMonth(),t.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},datePickerSetDefaultPeriod:function(t){var e=new Date,a=e.getDate(),s=e.getMonth()+1,n=e.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),e=n+"-"+s+"-"+a,this.selectedDate=e,console.log("datePickerSetDefaultPeriod="+t),this.period=t},setArrowActive:function(t){var e=document.querySelector(".color-blue");null!==e&&e.classList.remove("color-blue"),console.log("setArrowActive"),t.target.classList.add("color-blue")},setActive:function(t){document.querySelector(".color-dark").classList.remove("color-dark"),t.target.classList.add("color-dark");var e=document.querySelector(".color-blue");null!==e&&e.classList.remove("color-blue")},search:function(){console.log(),this.getDataByOptions()},getAgentFromChart:function(t){return this.selectedAgentUid===this.serverChartData[t["index"]]["uid"]?(this.selectedAgent=null,this.selectedAgentUid=this.s_agent_id||null,void this.getDataByOptions()):t?(this.selectedAgent=this.serverChartData[t["index"]],this.selectedAgentUid=this.serverChartData[t["index"]]["uid"],void this.getDataByOptions()):void 0},changePage:function(t){this.options.page=t,this.getDataByOptions()},goOutTo:function(t){console.log("authrize and goto",t)},updatePage:function(){this.getDataByOptions()},updateSortDesc:function(){this.getDataByOptions()},tokenIsCorrect:function(t){return!(!t||"-"===t||void 0===t)},getReportData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,a=localStorage.token;e.tokenIsCorrect(a)?(this.$loading(!0),b.methods.get("/report/missed/"+(t?"refresh/":"")+a).then((function(t){e.$loading(!1),!0===t.data.error&&(localStorage.token="",e.isValid=!0,alert(t.data.message)),e.$store.state.user=t.data.user,e.userData=t.data.user,e.setChartData(t.data.diagrama),e.setTableData(t.data.calls),e.setAgentMultiDropdown(t.data.agents),e.setDepartmentMultiDropdown(t.data.departments),e.datePickerSetDefaultPeriod(e.period)})).catch((function(t){e.$loading(!1),console.log(t),e.tokenIsCorrect(a)||Tt.push("/")}))):Tt.push("/")},getChartData:function(){this.getReportData()},getDataByOptions:function(){var t=this;t.generateSelectedAgentIdString(),t.generateSelectedDepartmentIdString(),t.generateSelectedTeamIdString();var e=this.selectedDate||"-",a=this.period||"-",s=this.s_department_id||"-",n=this.s_team_id||"-",l=this.selectedAgentUid||this.s_agent_id||"-",i=this.searchText||"-",o=this.options.page||"-",r=this.options.sortBy[0]||"-";"user_data"===this.options.sortBy[0]&&(r="first_name"),"business"===this.options.sortBy[0]&&(r="business_name"),"contact"===this.options.sortBy[0]&&(r="contact"),"user_data.department"===this.options.sortBy[0]&&(r="department_name"),"user_data.team"===this.options.sortBy[0]&&(r="team_name");var c=this.options.sortDesc[0]||"-";!1===this.options.sortDesc[0]&&(c="asc"),!0===this.options.sortDesc[0]&&(c="desc"),this.$loading(!0),b.methods.get("/report/missed/call/"+e+"/"+a+"/"+s+"/"+n+"/"+l+"/"+i+"/"+r+"/"+c+"/"+o).then((function(e){t.$loading(!1);var a=e.data.calls;t.setTableData(a),t.setChartData(e.data.diagrama)})).catch((function(t){console.log(t)}))},getDataByDate:function(t,e){var a=this;a.generateSelectedAgentIdString(),a.generateSelectedDepartmentIdString(),a.generateSelectedTeamIdString();var s="";""!==a.s_agent_id&&(s="/"+a.s_agent_id);var n=this.s_department_id||"-",l=this.s_team_id||"-";this.$loading(!0),b.methods.get("/report/missed/call/"+t+"/"+e+"/"+n+"/"+l+s).then((function(t){a.$loading(!1);var e=t.data.calls;a.setTableData(e),a.setChartData(t.data.diagrama),a.setDepartmentMultiDropdown(t.data.departments),a.setTeamMultiDropdown(t.data.teams),a.setAgentMultiDropdown(t.data.agents)})).catch((function(t){console.log(t)}))},getTableData:function(){var t=this;b.methods.get("/report/missed/call").then((function(e){var a=e.data.calls;t.setTableData(a)})).catch((function(t){console.log(t)}))},setChartData:function(t){var e={};this.serverChartData=t;for(var a=0;a<t.length;a++){var s=t[a].full_name,n=t[a].calls_count;e[s]=n}this.chartData=e},setTableData:function(t){this.tableCallsData=t.data,this.tablePage=parseInt(t.page),this.tablePageCount=t.pages_count},setAgentMultiDropdown:function(t){this.agent_multiple_options=t},setDepartmentMultiDropdown:function(t){console.log(t),this.department_multiple_options=t},setTeamMultiDropdown:function(t){console.log(t),this.team_multiple_options=t},generateSelectedAgentIdString:function(){console.log("generateSelectedAgentIdString");var t="";if(null!==this.agent_multiple_selected_value){var e=this.agent_multiple_selected_value,a=e.length;if(console.log(a),a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_agent_id=t},generateSelectedDepartmentIdString:function(){console.log("generateSelectedDepartmentIdString");var t="";if(null!==this.department_multiple_selected_value){var e=this.department_multiple_selected_value,a=e.length;if(console.log(a),a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_department_id=t},generateSelectedTeamIdString:function(){console.log("generateSelectedTeamIdString");var t="";if(null!==this.team_multiple_selected_value){var e=this.team_multiple_selected_value,a=e.length;if(console.log(a),a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_team_id=t},dateSelected:function(){console.log("dateSelected +"),console.log(this.selectedDate),this.getDataByDate(this.selectedDate,this.period)},updateData:function(){this.getReportData(!0)},addNewFilter:function(t){var e=this;b.methods.post("/request/filter",{name:t,page:1,day:this.selectedDate,period:this.period,department_id:this.s_department_id,team_id:this.s_team_id,user_id:this.s_agent_id,status_type:""}).then((function(){e.getFilters(),e.newFilterName="",e.selectedFilter=null})).catch((function(t){console.log(t)}))},getFilters:function(){var t=this;b.methods.get("/request/filter/all?page=1").then((function(e){t.filtersList=e.data})).catch((function(t){console.log(t)}))},deleteFilter:function(t){var e=this;console.log(t.id),b.methods.delete("/request/filter/".concat(t.id)).then((function(){e.getFilters(),e.selectedFilter=null})).catch((function(t){console.log(t)}))},setFilter:function(t){var e=this;if(console.log("setFilter__________________",t),null==t)return this.agent_multiple_selected_value=null,this.department_multiple_selected_value=null,this.team_multiple_selected_value=null,this.type_multiple_selected_value=null,void this.setUsers();this.selectedDate=t.day,this.period=t.period,console.log(this.selectedDate),console.log(this.period),t.department_id&&(this.department_multiple_selected_value=[],t.department_id.map((function(t){e.department_multiple_options.map((function(a){a.value==t&&e.department_multiple_selected_value.push(a)}))}))),t.team_id&&(this.team_multiple_selected_value=[],t.team_id.map((function(t){e.team_multiple_options.map((function(a){a.value==t&&e.team_multiple_selected_value.push(a)}))}))),t.status_type&&(this.type_multiple_selected_value=[],t.status_type.map((function(t){e.type_multiple_options.map((function(a){a.value==t&&e.type_multiple_selected_value.push(a)}))}))),t.user_id&&(console.log("--------------e.user_id--------------",t.user_id),console.log(this.agent_multiple_options),this.agent_multiple_selected_value=[],t.user_id.map((function(t){e.agent_multiple_options.map((function(a){a.value==t&&e.agent_multiple_selected_value.push(a)}))}))),this.setUsers()}},created:function(){this.getChartData(),this.getFilters()},mounted:function(){}},st=at,nt=(a("60bc"),a("6685"),a("8fea")),lt=a("891e"),it=Object(r["a"])(st,E,G,!1,null,"4df93a10",null),ot=it.exports;u()(it,{VDataTable:nt["a"],VPagination:lt["a"]});var rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Agent-Status"}},[a("div",{staticClass:"agent-status"},[a("div",{staticClass:"controls-container"},[a("div",{staticClass:"date-container"},[a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("today"),t.setActive(e)}}},[t._v("Today ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setBeforeDate(),t.setArrowActive(e)}}},[t._v("◂ ")]),a("date-picker",{staticClass:"date-item",attrs:{type:"date",valueType:"YYYY-MM-DD",format:"DD/MM/YYYY"},on:{change:function(e){return t.dateSelected()}},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}}),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setNextDate(),t.setArrowActive(e)}}},[t._v("▸ ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("day"),t.setActive(e)}}},[t._v("Day ")]),a("button",{staticClass:"button button-li date-item color-grey color-dark",on:{click:function(e){t.setDate("week"),t.setActive(e)}}},[t._v("Week ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("month"),t.setActive(e)}}},[t._v("Month ")]),a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.setDate("year"),t.setActive(e)}}},[t._v("Year ")])],1),a("div",{staticClass:"search-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",id:"search",placeholder:"Search...",name:"search"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),a("button",{staticClass:"button color-violet",attrs:{id:"search-button"},on:{click:function(e){t.search(t.searchText)}}},[t._v("Search ")])])]),a("div",{staticClass:"controls-container",staticStyle:{"justify-content":"space-between"}},[a("div",{staticClass:"multiselect-items",staticStyle:{display:"flex"}},[a("div",[a("label",{staticClass:"typo__label"},[t._v("Select Department(s)")]),a("multiselect",{staticStyle:{width:"fit-content"},attrs:{options:t.department_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setUsers},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.department_multiple_selected_value,callback:function(e){t.department_multiple_selected_value=e},expression:"department_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[t._v("Select Team(s)")]),a("multiselect",{attrs:{options:t.team_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setUsers},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.team_multiple_selected_value,callback:function(e){t.team_multiple_selected_value=e},expression:"team_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[t._v("Select agent(s)")]),a("multiselect",{attrs:{options:t.agent_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setUsers},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.agent_multiple_selected_value,callback:function(e){t.agent_multiple_selected_value=e},expression:"agent_multiple_selected_value"}})],1),a("div",[a("label",{staticClass:"typo__label"},[t._v("Select type(s)")]),a("multiselect",{attrs:{options:t.type_multiple_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"value","preselect-first":!0},on:{close:t.setTypes},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"},[t._v(" "+t._s(s.length)+" options selected ")]):t._e()]}}]),model:{value:t.type_multiple_selected_value,callback:function(e){t.type_multiple_selected_value=e},expression:"type_multiple_selected_value"}})],1),a("div",{staticClass:"filter-selector single-select"},[a("label",{staticClass:"typo__label"},[t._v("Select filter")]),a("multiselect",{staticClass:"single-select",attrs:{"preselect-first":!1,placeholder:"Pick some",label:"name",multiple:!1,options:t.filtersList,"track-by":"value","hide-selected":!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,searchable:!1,"show-labels":!1},on:{select:t.setFilter},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.values,n=(e.search,e.isOpen);return[s.length&&!n?a("span",{staticClass:"multiselect__single"}):t._e()]}}]),model:{value:t.selectedFilter,callback:function(e){t.selectedFilter=e},expression:"selectedFilter"}}),null!=t.selectedFilter?a("p",{on:{click:function(e){return t.deleteFilter(t.selectedFilter)}}},[t._v(" ✖ ")]):t._e()],1)]),a("div",[a("div",{staticClass:"filters multiselect-items"},[a("label",{staticClass:"typo__label"},[t._v("Add filter")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newFilterName,expression:"newFilterName"}],staticClass:"mx-input multiselect__tags",staticStyle:{padding:"0 5px"},attrs:{type:"text",placeholder:"New filter name"},domProps:{value:t.newFilterName},on:{input:function(e){e.target.composing||(t.newFilterName=e.target.value)}}}),a("div",{staticClass:"filters-options"},[""!=t.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){t.newFilterName=""}}},[t._v("Cancel")]):t._e(),""!=t.newFilterName?a("button",{staticClass:"button button-li date-item color-grey",on:{click:function(e){return t.addNewFilter(t.newFilterName)}}},[t._v("Add")]):t._e()])])])]),0!==Object.keys(t.chartDataStatuses).length?a("div",{staticClass:"chart-container"},[a("h2",[t._v("Statuses")]),a("div",{ref:"statusesChartRef",staticClass:"chart"})]):t._e(),0!==Object.keys(t.chartDataPhoneStatuses).length?a("div",{staticClass:"chart-container"},[a("h2",[t._v("Phone Statuses")]),a("div",{ref:"phoneStatusesChartRef",staticClass:"chart"})]):t._e(),0===Object.keys(t.chartDataStatuses).length?a("div",{staticClass:"table-container"},[a("h1",[t._v("No Chart Data For This Period")])]):t._e(),0===Object.keys(t.chartDataPhoneStatuses).length?a("div",{staticClass:"table-container"},[a("h1",[t._v("No Chart Data For This Period")])]):t._e(),t.tableCallsData.length>0?a("div",{staticClass:"table-container"},[a("v-data-table",{staticClass:"v-data-table elevation-1",attrs:{headers:t.tableCallsHeaders,items:t.tableCallsData,"items-per-page":20,page:t.tablePage,options:t.optionsTable,"hide-default-footer":!0,"fixed-header":""},on:{"update:page":[function(e){t.tablePage=e},t.updatePage],"update:options":function(e){t.optionsTable=e},"update:sort-desc":t.updateSortDesc},scopedSlots:t._u([{key:"item.user_data",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.user_data.photo_url,alt:""}}),a("p",[t._v(t._s(s.user_data.full_name))])])]}},{key:"item.user_data.department",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("p",[t._v(t._s(s.user_data.department.name))])])]}},{key:"item.user_data.team",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("p",[t._v(t._s(s.user_data.team.name))])])]}},{key:"item.business",fn:function(e){var s=e.item;return[a("div",{staticClass:"business"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.business.business_link},on:{click:function(e){return t.goOutTo(s.business.business_link)}}},[t._v(t._s(s.business.business_name)+" ")])])]}},{key:"item.contact",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.contact.contact_link},on:{click:function(e){return t.goOutTo(s.contact.contact_link)}}},[t._v(t._s(s.contact.contact_name)+" ")])])]}},{key:"item.time_create",fn:function(e){var s=e.item;return[a("div",{staticClass:"table-date-cell"},[t._v(t._s(t.getDate(s["time_create"])))])]}}],null,!1,2219458636)}),t.tablePageCount>1?a("v-pagination",{staticClass:"table-pagination",attrs:{length:t.tablePageCount,"next-icon":t.nextIcon,"prev-icon":t.prevIcon},on:{input:t.changePage},model:{value:t.tablePage,callback:function(e){t.tablePage=e},expression:"tablePage"}}):t._e()],1):t._e(),0==t.tableCallsData.length?a("div",{staticClass:"table-container"},[a("h1",[t._v("No Table Data For This Period")])]):t._e(),t.tableTotalCallsData.length>0?a("div",{staticClass:"table-container"},[a("h1",[t._v("Total Table ")]),a("v-data-table",{staticClass:"v-data-table elevation-1",attrs:{headers:t.tableTotalCallsHeaders,items:t.tableTotalCallsData,"items-per-page":20,page:t.tableTotalPage,options:t.optionsTableTotal,"hide-default-footer":!0,"fixed-header":""},on:{"update:page":[function(e){t.tableTotalPage=e},t.updateTotalPage],"update:options":function(e){t.optionsTableTotal=e},"update:sort-desc":t.updateTotalSortDesc},scopedSlots:t._u([{key:"item.user_data",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.user_data.photo_url,alt:""}}),a("p",[t._v(t._s(s.user_data.full_name))])])]}},{key:"item.user_data.department",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("p",[t._v(t._s(s.user_data.department.name))])])]}},{key:"item.user_data.team",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("p",[t._v(t._s(s.user_data.team.name))])])]}},{key:"item.business",fn:function(e){var s=e.item;return[a("div",{staticClass:"business"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.business.business_link},on:{click:function(e){return t.goOutTo(s.business.business_link)}}},[t._v(t._s(s.business.business_name)+" ")])])]}},{key:"item.contact",fn:function(e){var s=e.item;return[a("div",{staticClass:"user"},[a("a",{staticClass:"url",attrs:{target:"_blank",href:s.contact.contact_link},on:{click:function(e){return t.goOutTo(s.contact.contact_link)}}},[t._v(t._s(s.contact.contact_name)+" ")])])]}},{key:"item.time_create",fn:function(e){var s=e.item;return[a("div",{staticClass:"table-date-cell"},[t._v(t._s(t.getDate(s["time_create"])))])]}}],null,!1,2219458636)}),t.tableTotalPageCount>1?a("v-pagination",{staticClass:"table-pagination",attrs:{length:t.tableTotalPageCount,"next-icon":t.nextIcon,"prev-icon":t.prevIcon},on:{input:t.changeTotalPage},model:{value:t.tableTotalPage,callback:function(e){t.tableTotalPage=e},expression:"tableTotalPage"}}):t._e()],1):t._e(),0==t.tableTotalCallsData.length?a("div",{staticClass:"table-container"},[a("h1",[t._v("No Table Data For This Period")])]):t._e()])])},ct=[],ut=(a("4de4"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("ddb0"),a("0bd7")),dt=(a("96cf"),a("7580")),ht=a("8eeb"),pt=a.n(ht),gt={name:"AgentStatus",components:{DatePicker:W["a"],Multiselect:et.a},data:function(){return{selectedDate:null,dateType:"date",userData:[],chartDataStatuses:[],chartDataPhoneStatuses:[],serverChartDataStatuses:null,serverChartPhoneStatuses:null,selectedUserChartStatuses:null,selectedUserChartPhoneStatuses:null,optionsTable:{},tableCallsData:[],tableCallsHeaders:[{text:"Agent",value:"user_data"},{text:"Status Type",value:"name"},{text:"Status Value",value:"value"},{text:"Status In",value:"time_start"},{text:"Status Out",value:"time_end",width:200},{text:"Status Duration",value:"duration",sortable:!1,width:150}],tablePage:null,tableSort:null,tablePageCount:null,optionsTableTotal:{},tableTotalCallsData:[],tableTotalCallsHeaders:[{text:"Day",value:"day"},{text:"Agent Name",value:"user_data"},{text:"Name",value:"name"},{text:"Value",value:"value"},{text:"Time",value:"duration"}],tableTotalPage:null,tableTotalSort:null,tableTotalPageCount:null,searchText:null,selectedAgent:null,selectedAgentUid:null,agent_multiple_options:[],agent_multiple_selected_value:null,department_multiple_options:[],department_multiple_selected_value:null,team_multiple_options:[],team_multiple_selected_value:null,type_multiple_options:[],type_multiple_selected_value:null,nextIcon:">",prevIcon:"<",s_agent_id:"",s_department_id:"",s_team_id:"",s_type_id:"",period:"week",newFilterName:"",filtersList:[],selectedFilter:null,serverChartDataValue:"",serverChartPhoneDataValue:"",phoneStatusesChartOptions:{},statusesChartOptions:{},statusesChart:null,phoneStatusesChart:null}},methods:{getPeriod:function(){return this.period},getDate:function(t){var e=new Date(1e3*t),a=q()(e).format("ll"),s=q()(e).format("hh:mm:ss a");return s+" "+a},setUsers:function(){this.selectedAgentUid=null,this.setDate(this.period)},setTypes:function(){this.selectedAgentUid=null,this.setDate(this.period)},setDepartments:function(){this.selectedAgentUid=null,this.setDate(this.period)},setDate:function(t){switch(this.period=t,this.searchText="",this.period){case"today":var e=new Date,a=e.getDate(),s=e.getMonth()+1,n=e.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),e=n+"-"+s+"-"+a,this.selectedDate=e,this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"day":this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"week":this.getDataByDate(this.selectedDate,"week"),this.period="week";break;case"month":this.getDataByDate(this.selectedDate,"month"),this.period="month";break;case"year":this.getDataByDate(this.selectedDate,"year"),this.period="year";break;default:this.period="week";break}},setBeforeDate:function(){console.log("setBeforeDate "+this.period+" "+this.selectedDate);var t=q()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=q()(t.setDate(t.getDate()-1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=q()(t.setDate(t.getDate()-7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=q()(t.setMonth(t.getMonth()-1,t.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=q()(t.setFullYear(t.getFullYear()-1,t.getMonth(),t.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},setNextDate:function(){console.log("setNextDate "+this.period+" "+this.selectedDate);var t=q()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=q()(t.setDate(t.getDate()+1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=q()(t.setDate(t.getDate()+7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=q()(t.setMonth(t.getMonth()+1,t.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=q()(t.setFullYear(t.getFullYear()+1,t.getMonth(),t.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},datePickerSetDefaultPeriod:function(t){var e=new Date,a=e.getDate(),s=e.getMonth()+1,n=e.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),e=n+"-"+s+"-"+a,this.selectedDate=e,this.period=t},setArrowActive:function(t){var e=document.querySelector(".color-blue");null!==e&&e.classList.remove("color-blue"),t.target.classList.add("color-blue")},setActive:function(t){document.querySelector(".color-dark").classList.remove("color-dark"),t.target.classList.add("color-dark");var e=document.querySelector(".color-blue");null!==e&&e.classList.remove("color-blue")},search:function(){this.getDataByOptions({url:"status"})},changePage:function(t){this.optionsTable.page=t,this.getDataByOptions({url:"status"})},changeTotalPage:function(t){this.optionsTableTotal.page=t,this.getDataByOptions({url:"total"})},goOutTo:function(t){console.log("authrize and goto",t)},updatePage:function(){this.getDataByOptions({url:"status"})},updateTotalPage:function(){this.getDataByOptions({url:"total"})},updateSortDesc:function(){this.getDataByOptions({url:"status"})},updateTotalSortDesc:function(){this.getDataByOptions({url:"total"})},tokenIsCorrect:function(t){return!(!t||"-"===t||void 0===t)},getReportData:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=n.length>0&&void 0!==n[0]&&n[0],a=this,s=localStorage.token,a.tokenIsCorrect(s)?(this.$loading(!0),b.methods.get("/report/agent/status/"+(e?"refresh/":"")+s).then((function(t){a.$loading(!1),!0===t.data.error&&(localStorage.token="",a.isValid=!0,alert(t.data.message)),a.$store.state.user=t.data.user,a.userData=t.data.user,a.setChartData(t.data.diagrama),a.setTableData(t.data.status),a.setTableTotalData(t.data.total),a.setAgentMultiDropdown(t.data.agents),a.setDepartmentMultiDropdown(t.data.departments),a.setTypeMultiDropdown(t.data.types),a.datePickerSetDefaultPeriod(a.period)})).catch((function(t){a.errorHappen(t),a.tokenIsCorrect(s)||Tt.push("/")}))):Tt.push("/");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDataByOptions:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(e){var a,s,n,l,i,o,r,c,u,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("-------getDataByOptions---------",e),a=this,this.generateSelectedAgentIdString(),this.generateSelectedDepartmentIdString(),this.generateSelectedTeamIdString(),this.generateSelectedTypeIdString(),s="/report/agent/status/",n=this.selectedDate||"-",l=this.period||"-",i=this.s_department_id||"-",o=this.s_team_id||"-",r=this.selectedAgentUid||this.s_agent_id||"-",c=this.searchText||"-",u=this.s_type_id||"-",d="-",h="-",p="-","status"===e.url&&(s="/report/agent/status/page/",d=this.optionsTable.page,h=this.optionsTable.page,p=this.optionsTable.page),"total"===e.url&&(s="/report/agent/status/total/page/",d=this.optionsTableTotal.page,h=this.optionsTableTotal.page,p=this.optionsTableTotal.page),"user_data"===this.optionsTable.sortBy[0]&&(h="first_name"),"business"===this.optionsTable.sortBy[0]&&(h="business_name"),"contact"===this.optionsTable.sortBy[0]&&(h="contact"),"user_data.department"===this.optionsTable.sortBy[0]&&(h="department_name"),"user_data.team"===this.optionsTable.sortBy[0]&&(h="team_name"),!1===this.optionsTable.sortDesc[0]&&(p="asc"),!0===this.optionsTable.sortDesc[0]&&(p="desc"),"day"===this.optionsTableTotal.sortBy[0]&&(h="day"),"user_data"===this.optionsTableTotal.sortBy[0]&&(h="first_name"),"name"===this.optionsTableTotal.sortBy[0]&&(h="name"),"value"===this.optionsTableTotal.sortBy[0]&&(h="value"),"duration"===this.optionsTableTotal.sortBy[0]&&(h="duration"),!1===this.optionsTableTotal.sortDesc[0]&&(p="asc"),!0===this.optionsTableTotal.sortDesc[0]&&(p="desc"),console.log("sortField3 = "+h),this.$loading(!0),console.log("options"),console.log(e),console.log("Object.keys(options).length="+Object.keys(e).length),0===Object.keys(e).length?(b.methods.get("/report/agent/status/"+n+"/"+l+"/"+i+"/"+o+"/"+r+"/"+u+"/"+c+"/"+h+"/"+p+"/"+d).then((function(t){a.$loading(!1),console.log("getDataByOptions status",e);var s=t.data.status;a.setTableData(s),a.setChartData(t.data.diagrama)})).catch((function(t){a.errorHappen(t)})),b.methods.get("/report/agent/status/total/page/"+n+"/"+l+"/"+i+"/"+o+"/"+r+"/"+u+"/"+c+"/"+h+"/"+p+"/"+d).then((function(t){a.$loading(!1),console.log("getDataByOptions total",e);var s=t.data.total;a.setTableTotalData(s),a.setChartData(t.data.diagrama)})).catch((function(t){a.errorHappen(t)}))):b.methods.get(s+n+"/"+l+"/"+i+"/"+o+"/"+r+"/"+u+"/"+c+"/"+h+"/"+p+"/"+d).then((function(t){if(a.$loading(!1),t.data.status){console.log("getDataByOptions status",e);var s=t.data.status;a.setTableData(s)}if(t.data.total){console.log("getDataByOptions total",e);var n=t.data.total;a.setTableTotalData(n)}a.setChartData(t.data.diagrama)})).catch((function(t){a.errorHappen(t)}));case 39:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getDataByDate:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(e,a){var s,n,l,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=this,s.generateSelectedAgentIdString(),s.generateSelectedDepartmentIdString(),s.generateSelectedTeamIdString(),this.generateSelectedTypeIdString(),n="",""!==s.s_type_id&&(n="/"+s.s_type_id),l=this.s_department_id||"-",i=this.s_team_id||"-",o=this.s_agent_id||"-",this.$loading(!0),b.methods.get("/report/agent/status/page/"+e+"/"+a+"/"+l+"/"+i+"/"+o+n).then((function(t){s.$loading(!1);var e=t.data.status;s.setTableData(e),s.setChartData(t.data.diagrama),s.setDepartmentMultiDropdown(t.data.departments),s.setTeamMultiDropdown(t.data.teams),s.setAgentMultiDropdown(t.data.agents)})).catch((function(t){s.errorHappen(t)})),b.methods.get("/report/agent/status/total/page/"+e+"/"+a+"/"+l+"/"+i+"/"+o+n).then((function(t){s.$loading(!1);var e=t.data.total;s.setTableTotalData(e)})).catch((function(t){s.errorHappen(t)}));case 13:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getAgentFromChartStatuses:function(t){this.selectedUserChartStatuses=this.serverChartDataStatuses.data[t.index]},getAgentFromChartPhoneStatuses:function(t){this.selectedUserChartPhoneStatuses=this.serverChartPhoneStatuses.data[t.index]},setTableData:function(t){this.tableCallsData=t.data,this.tablePage=parseInt(t.page),this.tablePageCount=t.pages_count},setTableTotalData:function(t){this.tableTotalCallsData=t.data,this.tableTotalPage=parseInt(t.page),this.tableTotalPageCount=t.pages_count},setAgentMultiDropdown:function(t){this.agent_multiple_options=t},setDepartmentMultiDropdown:function(t){this.department_multiple_options=t},setTeamMultiDropdown:function(t){this.team_multiple_options=t},setTypeMultiDropdown:function(t){this.type_multiple_options=t},generateSelectedAgentIdString:function(){var t="";if(null!==this.agent_multiple_selected_value){var e=this.agent_multiple_selected_value,a=e.length;if(a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_agent_id=t},generateSelectedDepartmentIdString:function(){var t="";if(null!==this.department_multiple_selected_value){var e=this.department_multiple_selected_value,a=e.length;if(a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_department_id=t},generateSelectedTeamIdString:function(){var t="";if(null!==this.team_multiple_selected_value){var e=this.team_multiple_selected_value,a=e.length;if(a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_team_id=t},generateSelectedTypeIdString:function(){var t="";if(null!==this.type_multiple_selected_value){var e=this.type_multiple_selected_value,a=e.length;if(a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_type_id=t},dateSelected:function(){this.getDataByDate(this.selectedDate,this.period)},updateData:function(){this.getReportData(!0)},errorHappen:function(t){console.log("error : ",t),alert("Something went wrong!"),this.$loading(!1),this.getReportData()},uniqString:function(t){if(""==t)return"";var e=t.split(",").filter(Boolean),a=e.filter(Boolean),s=Object(ut["a"])(new Set(a)),n=s+"";return n},addNewFilter:function(t){this.getLegendsData();var e=this;b.methods.post("/request/filter",{name:t,page:2,day:this.selectedDate,period:this.period,department_id:this.s_department_id,team_id:this.s_team_id,user_id:this.s_agent_id,status_type:this.s_type_id,chart_status:this.serverChartDataValue,chart_phone_status:this.serverChartPhoneDataValue}).then((function(){e.getFilters(),e.newFilterName="",e.selectedFilter=null,e.serverChartDataValue="",e.serverChartPhoneDataValue=""})).catch((function(t){console.log(t)}))},getFilters:function(){var t=this;b.methods.get("/request/filter/all?page=2").then((function(e){t.filtersList=e.data})).catch((function(t){console.log(t)}))},deleteFilter:function(t){var e=this;b.methods.delete("/request/filter?id=".concat(t.id)).then((function(){e.getFilters(),e.selectedFilter=null})).catch((function(t){console.log(t)}))},setFilter:function(t){var e=this;if(null==t)return this.statusesChart.resetSeries(),this.phoneStatusesChart.resetSeries(),this.agent_multiple_selected_value=null,this.department_multiple_selected_value=null,this.team_multiple_selected_value=null,void(this.type_multiple_selected_value=null);this.selectedDate=t.day,this.period=t.period,this.serverChartDataValue=t.chart_status,this.serverChartPhoneDataValue=t.chart_phone_status,t.department_id&&(this.department_multiple_selected_value=[],t.department_id.map((function(t){e.department_multiple_options.map((function(a){a.value==t&&e.department_multiple_selected_value.push(a)}))}))),t.team_id&&(this.team_multiple_selected_value=[],t.team_id.map((function(t){e.team_multiple_options.map((function(a){a.value==t&&e.team_multiple_selected_value.push(a)}))}))),t.status_type&&(this.type_multiple_selected_value=[],t.status_type.map((function(t){e.type_multiple_options.map((function(a){a.value==t&&e.type_multiple_selected_value.push(a)}))}))),t.user_id&&(this.agent_multiple_selected_value=[],t.user_id.map((function(t){e.agent_multiple_options.map((function(a){a.value==t&&e.agent_multiple_selected_value.push(a)}))}))),this.setUsers()},setChartFilter:function(t,e,a){if(console.log(t,e,a),null!=e){var s=t.data.filter((function(t){return t.status_value==e}));if("chartDataStatuses"==a){for(var n={},l=0;l<s.length;l++){var i=s[l].x,o=s[l].y;n[i]=o}this.chartDataStatuses=n}if("chartDataPhoneStatuses"==a){for(var r={},c=0;c<s.length;c++){var u=s[c].x,d=s[c].y;r[u]=d}this.chartDataPhoneStatuses=r}}},secondsToTime:function(t){var e=60*t,a=new Date(1970,0,1);a.setSeconds(e);var s=a.toTimeString().substr(0,8);return e>86399&&(s=Math.floor((a-Date.parse("1/1/70"))/36e5)+s.substr(2)),s},setChartData:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(e){var a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=this,0==e.length&&(this.chartDataStatuses=[],this.chartDataPhoneStatuses=[]),e.map((function(t){if("status"==t.name){var e=t.data,n={};s.serverChartDataStatuses=t;var l={chart:{height:350,type:"bar",stacked:!0,animations:{enabled:!1,dynamicAnimation:{enabled:!1}},events:{}},dataLabels:{enabled:!1},series:t.chart.hours,xaxis:{categories:t.chart.names},responsive:[{breakpoint:280,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],fill:{opacity:1},legend:{position:"right",offsetX:0,offsetY:50},tooltip:{y:{formatter:function(t){var e=a.secondsToTime(t);return e}}}};s.statusesChartOptions=l,s.renderStatusesChart();for(var i=0;i<e.length;i++){var o=e[i].x,r=e[i].y;n[o]=r}s.chartDataStatuses=n}if("phone_status"==t.name){var c=t.data,u={};s.serverChartPhoneStatuses=t;var d={chart:{height:350,type:"bar",stacked:!0,animations:{enabled:!1,dynamicAnimation:{enabled:!1}},events:{}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},series:t.chart.hours,xaxis:{categories:t.chart.names},responsive:[{breakpoint:280,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],fill:{opacity:1},legend:{position:"right",offsetX:0,offsetY:50},tooltip:{y:{formatter:function(t){var e=a.secondsToTime(t);return e}}}};s.phoneStatusesChartOptions=d,s.renderPhoneStatusesChart();for(var h=0;h<t.data.length;h++){var p=c[h].x,g=c[h].y;u[p]=g}s.chartDataPhoneStatuses=u}}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),renderStatusesChart:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!=this.statusesChart&&null!=this.statusesChart.ohYeahThisChartHasBeenRendered&&this.statusesChart.destroy(),e=this,this.statusesChart=new pt.a(this.$refs.statusesChartRef,this.statusesChartOptions),this.statusesChart.render().then((function(){return a.statusesChart.ohYeahThisChartHasBeenRendered=!0})).then((function(){if(a.serverChartDataValue&&a.selectedFilter)for(var t=function(t){setTimeout((function(){e.statusesChart.toggleSeries(e.serverChartDataValue[t])}),500)},s=0;s<a.serverChartDataValue.length;s++)t(s)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),renderPhoneStatusesChart:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!=this.phoneStatusesChart&&null!=this.phoneStatusesChart.ohYeahThisChartHasBeenRendered&&this.phoneStatusesChart.destroy(),e=this,this.phoneStatusesChart=new pt.a(this.$refs.phoneStatusesChartRef,this.phoneStatusesChartOptions),this.phoneStatusesChart.render().then((function(){return a.phoneStatusesChart.ohYeahThisChartHasBeenRendered=!0})).then((function(){if(a.serverChartPhoneDataValue&&a.selectedFilter)for(var t=function(t){setTimeout((function(){e.phoneStatusesChart.toggleSeries(e.serverChartPhoneDataValue[t])}),500)},s=0;s<a.serverChartPhoneDataValue.length;s++)t(s)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getLegendsData:function(){this.serverChartDataValue="",this.serverChartPhoneDataValue="";var t=this.$refs.statusesChartRef.getElementsByClassName("apexcharts-legend-series");console.log(t);for(var e=0;e<t.length;e++)"true"==t[e].getAttribute("data:collapsed")&&(this.serverChartDataValue+=","+t[e].getAttribute("seriesname")+",");var a=this.$refs.phoneStatusesChartRef.getElementsByClassName("apexcharts-legend-series");console.log(a);for(var s=0;s<a.length;s++)"true"==a[s].getAttribute("data:collapsed")&&(this.serverChartPhoneDataValue+=","+a[s].getAttribute("seriesname")+",")}},created:function(){var t=Object(dt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.setUsers();case 2:return t.next=4,this.getReportData();case 4:return t.next=6,this.getFilters();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{},watch:{},mounted:function(){}},mt=gt,ft=(a("28df"),Object(r["a"])(mt,rt,ct,!1,null,"55dbf924",null)),_t=ft.exports;u()(ft,{VDataTable:nt["a"],VPagination:lt["a"]});var vt={name:"HelloWorld",components:{HeaderComponent:U},data:function(){return{activeTab:null,tabs:[{name:"Missed Calls",path:"/dashboard/missed-calls",component:ot},{name:"Agent Status Time Tracking",path:"/dashboard/agent-status",component:_t}],selectedDate:null,dateType:"date",chartData:[],userData:[],tableCallsData:[],serverChartData:null,options:{},tableCallsHeaders:[{text:"Agent",value:"user_data"},{text:"Business Name",value:"business"},{text:"Contact",value:"contact",width:200},{text:"Phone",value:"phone",sortable:!1,width:150},{text:"Created Time",value:"time_create",sortable:!1,width:120}],tablePage:null,tableSort:null,tablePageCount:null,tableItemsPerPage:null,searchText:null,selectedAgent:null,selectedAgentUid:null,agent_multiple_options:[],agent_multiple_selected_value:null,nextIcon:">",prevIcon:"<",s_agent_id:"",period:"week"}},methods:{getPeriod:function(){return this.period},getDate:function(t){var e=new Date(1e3*t),a=q()(e).format("ll"),s=q()(e).format("hh:mm:ss a");return s+" "+a},setUsers:function(){this.selectedAgentUid=null,this.setDate(this.period)},ffFff:function(){console.log("!!!!!!!!")},setDate:function(t){switch(this.period=t,this.searchText="",this.period){case"today":var e=new Date,a=e.getDate(),s=e.getMonth()+1,n=e.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),e=n+"-"+s+"-"+a,console.log("today="+e),this.selectedDate=e,this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"day":console.log("day="+this.selectedDate),this.getDataByDate(this.selectedDate,"day"),this.period="day";break;case"week":console.log("week="+this.selectedDate),this.getDataByDate(this.selectedDate,"week"),this.period="week";break;case"month":console.log("month="+this.selectedDate),this.getDataByDate(this.selectedDate,"month"),this.period="month";break;case"year":console.log("year="+this.selectedDate),this.getDataByDate(this.selectedDate,"year"),this.period="year";break;default:this.period="week";break}},setBeforeDate:function(){console.log("setBeforeDate "+this.period+" "+this.selectedDate);var t=q()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=q()(t.setDate(t.getDate()-1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=q()(t.setDate(t.getDate()-7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=q()(t.setMonth(t.getMonth()-1,t.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=q()(t.setFullYear(t.getFullYear()-1,t.getMonth(),t.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},setNextDate:function(){console.log("setNextDate "+this.period+" "+this.selectedDate);var t=q()(this.selectedDate,"YYYY-MM-DD").toDate();switch(this.period){case"today":case"day":this.selectedDate=q()(t.setDate(t.getDate()+1)).format("YYYY-MM-DD");break;case"week":this.selectedDate=q()(t.setDate(t.getDate()+7)).format("YYYY-MM-DD");break;case"month":this.selectedDate=q()(t.setMonth(t.getMonth()+1,t.getDate())).format("YYYY-MM-DD");break;case"year":this.selectedDate=q()(t.setFullYear(t.getFullYear()+1,t.getMonth(),t.getDate())).format("YYYY-MM-DD");break}this.setDate(this.period)},datePickerSetDefaultPeriod:function(t){var e=new Date,a=e.getDate(),s=e.getMonth()+1,n=e.getFullYear();a<10&&(a="0"+a),s<10&&(s="0"+s),e=n+"-"+s+"-"+a,this.selectedDate=e,console.log("datePickerSetDefaultPeriod="+t),this.period=t},setArrowActive:function(t){var e=document.querySelector(".color-blue");null!==e&&e.classList.remove("color-blue"),console.log("setArrowActive"),t.target.classList.add("color-blue")},setActive:function(t){document.querySelector(".color-dark").classList.remove("color-dark"),t.target.classList.add("color-dark");var e=document.querySelector(".color-blue");null!==e&&e.classList.remove("color-blue")},search:function(){console.log(),this.getDataByOptions()},getAgentFromChart:function(t){return this.selectedAgentUid===this.serverChartData[t["index"]]["uid"]?(this.selectedAgent=null,this.selectedAgentUid=this.s_agent_id||null,void this.getDataByOptions()):t?(this.selectedAgent=this.serverChartData[t["index"]],this.selectedAgentUid=this.serverChartData[t["index"]]["uid"],void this.getDataByOptions()):void 0},changePage:function(t){this.options.page=t,this.getDataByOptions()},goOutTo:function(t){console.log("authrize and goto",t)},updatePage:function(){this.getDataByOptions()},updateSortDesc:function(){this.getDataByOptions()},tokenIsCorrect:function(t){return!(!t||"-"===t||void 0===t)},getReportData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,a=localStorage.token;e.tokenIsCorrect(a)?(this.$loading(!0),b.methods.get("/report/missed/"+(t?"refresh/":"")+a).then((function(t){e.$loading(!1),!0===t.data.error&&(localStorage.token="",e.isValid=!0,alert(t.data.message)),e.$store.state.user=t.data.user,e.userData=t.data.user,e.setChartData(t.data.diagrama),e.setTableData(t.data.calls),e.setAgentMultiDropdown(t.data.agents),e.datePickerSetDefaultPeriod(e.period)})).catch((function(t){e.$loading(!1),console.log(t),e.tokenIsCorrect(a)||Tt.push("/")}))):Tt.push("/")},getChartData:function(){this.getReportData()},getDataByOptions:function(){var t=this;t.generateSelectedAgentIdString();var e=this.selectedDate||"-",a=this.period||"-",s=this.selectedAgentUid||this.s_agent_id||"-",n=this.searchText||"-",l=this.options.page||"-",i=this.options.sortBy[0]||"-";"user_data"===this.options.sortBy[0]&&(i="first_name"),"business"===this.options.sortBy[0]&&(i="business_name"),"contact"===this.options.sortBy[0]&&(i="contact");var o=this.options.sortDesc[0]||"-";!1===this.options.sortDesc[0]&&(o="asc"),!0===this.options.sortDesc[0]&&(o="desc"),this.$loading(!0),b.methods.get("/report/missed/call/"+e+"/"+a+"/"+s+"/"+n+"/"+i+"/"+o+"/"+l).then((function(e){t.$loading(!1);var a=e.data.calls;t.setTableData(a),t.setChartData(e.data.diagrama)})).catch((function(t){console.log(t)}))},getDataByDate:function(t,e){var a=this;a.generateSelectedAgentIdString();var s="";""!==a.s_agent_id&&(s="/"+a.s_agent_id),this.$loading(!0),b.methods.get("/report/missed/call/"+t+"/"+e+s).then((function(t){a.$loading(!1);var e=t.data.calls;a.setTableData(e),a.setChartData(t.data.diagrama)})).catch((function(t){console.log(t)}))},getTableData:function(){var t=this;b.methods.get("/report/missed/call").then((function(e){var a=e.data.calls;t.setTableData(a)})).catch((function(t){console.log(t)}))},setChartData:function(t){var e={};this.serverChartData=t;for(var a=0;a<t.length;a++){var s=t[a].full_name,n=t[a].calls_count;e[s]=n}this.chartData=e},setTableData:function(t){this.tableCallsData=t.data,this.tablePage=parseInt(t.page),this.tablePageCount=t.pages_count},setAgentMultiDropdown:function(t){console.log(t),this.agent_multiple_options=t},generateSelectedAgentIdString:function(){console.log("generateSelectedAgentIdString");var t="";if(null!==this.agent_multiple_selected_value){var e=this.agent_multiple_selected_value,a=e.length;if(console.log(a),a)for(var s=0;s<a;s++)t+=e[s].value,s+1!==a&&(t+=",")}this.s_agent_id=t},dateSelected:function(){console.log("dateSelected +"),console.log(this.selectedDate),this.getDataByDate(this.selectedDate,this.period)},updateData:function(){this.getReportData(!0)}},created:function(){},mounted:function(){}},bt=vt,Dt=(a("3201"),a("71a3")),yt=a("fe57"),Ct=Object(r["a"])(bt,F,B,!1,null,"4d1349ec",null),kt=Ct.exports;u()(Ct,{VTab:Dt["a"],VTabs:yt["a"]}),s["a"].use(g["a"]);var St=[{path:"/",name:"Login",component:O},{path:"/dashboard/:id",name:"Dashboard",component:kt,children:[{path:"/dashboard/missed-calls",component:ot},{path:"/dashboard/agent-status",component:_t}]}],wt=new g["a"]({mode:"history",base:"/",routes:St}),Tt=wt,jt=a("2f62");s["a"].use(jt["a"]);var Yt=new jt["a"].Store({state:{},mutations:{},actions:{}}),xt=a("f309");s["a"].use(xt["a"]);var Pt=new xt["a"]({icons:{iconfont:"fa"}}),Mt=a("ca55"),At=a("1321"),Ot=a.n(At);s["a"].config.productionTip=!1,s["a"].use(jt["a"]),s["a"].use(Ot.a),s["a"].use(Mt["a"],{text:"Loading ...",loading:!1,classes:["myclass"]}),new s["a"]({router:Tt,store:Yt,vuetify:Pt,render:function(t){return t(p)}}).$mount("#app")},6685:function(t,e,a){"use strict";var s=a("e663"),n=a.n(s);n.a},"6d80":function(t,e,a){t.exports=a.p+"img/logo-dashboard.0ddf9496.png"},"6f08":function(t,e,a){},"7c55":function(t,e,a){"use strict";var s=a("6f08"),n=a.n(s);n.a},9184:function(t,e,a){"use strict";var s=a("dbcb"),n=a.n(s);n.a},b2f4:function(t,e,a){},b463:function(t,e,a){t.exports=a.p+"img/logo-login.68e4f711.png"},cdfc:function(t,e,a){},dbcb:function(t,e,a){},deb4:function(t,e,a){},e663:function(t,e,a){}});
//# sourceMappingURL=app.cf9a2af0.js.map